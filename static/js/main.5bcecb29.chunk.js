(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{22:function(e,t,n){e.exports={postWrapper:"Post_postWrapper__3K_fb",row:"Post_row__o0PMz",userAvatar:"Post_userAvatar__30ulQ",postText:"Post_postText__3S6sg",likeButton:"Post_likeButton__3EY1C",likesCount:"Post_likesCount__3bakW"}},25:function(e,t,n){e.exports={userWrapper:"User_userWrapper__2xQ-c",userPhoto:"User_userPhoto__1HYP9",userInfo:"User_userInfo__3hNHQ",userName:"User_userName__3FRpC",userStatus:"User_userStatus__2TQoH"}},27:function(e,t,n){e.exports={userPersonalDataWrapper:"UserPersonalData_userPersonalDataWrapper__iRHoW",userAvatarWrapper:"UserPersonalData_userAvatarWrapper__2h3rN",userAvatar:"UserPersonalData_userAvatar__214Zs",userInfo:"UserPersonalData_userInfo__2y-7K",userPosts:"UserPersonalData_userPosts__3ahOU"}},30:function(e,t,n){e.exports={topProfilePicture:"Profile_topProfilePicture__3H_eC",header:"Profile_header__1MLMH",profileWrapper:"Profile_profileWrapper__2N-o7",userPersonalData:"Profile_userPersonalData__1Y_oB",userPosts:"Profile_userPosts__mfEuC"}},33:function(e,t,n){e.exports={addNewPostWrapper:"AddNewPost_addNewPostWrapper__3VvKU",addPostText:"AddNewPost_addPostText__15XwM",addPostButton:"AddNewPost_addPostButton__3iRWg"}},37:function(e,t,n){e.exports={appWrapper:"App_appWrapper__1ACwV",appContent:"App_appContent__ZqFuH"}},40:function(e,t,n){e.exports={nav:"Nav_nav__3D-l-",navList:"Nav_navList__2jQZA"}},41:function(e,t,n){e.exports={navItem:"NavItem_navItem__1TNPW",active:"NavItem_active__2aBad"}},51:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(2),a=(n(1),n(4)),s=n(7),o=n(0),c=function(e){return Object(s.b)((function(e){return{isAuth:e.auth.isAuth}}),null)((function(t){return t.isAuth?Object(o.jsx)(e,Object(r.a)({},t)):Object(o.jsx)(a.a,{to:"login/"})}))}},52:function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return u}));var r=n(24),a=n(2),s="./my-app/dialogsPage/UPDATE_MESSAGE_TEXT",o="./my-app/dialogsPage/ADD_NEW_MESSAGE",c={newMessageText:"",dialogsData:[{id:1,name:"Masha"},{id:2,name:"Sasha"},{id:3,name:"Evgeny"},{id:4,name:"Dmitry"},{id:5,name:"Masha"}],messagesData:[{id:1,messageText:"Hello!"},{id:2,messageText:"How are you!"},{id:3,messageText:"=)"}]},i=function(e){return{type:s,text:e}},u=function(){return{type:o}};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case s:return Object(a.a)(Object(a.a)({},e),{},{newMessageText:t.text});case o:var n={id:e.messagesData.length+1,messageText:e.newMessageText};return Object(a.a)(Object(a.a)({},e),{},{messagesData:[].concat(Object(r.a)(e.messagesData),[n]),newMessageText:""});default:return e}}},55:function(e,t,n){e.exports={header:"Header_header___BJgy"}},58:function(e,t,n){},69:function(e,t,n){},93:function(e,t,n){},94:function(e,t,n){},95:function(e,t,n){e.exports={active:"Pagination_active__9L57R"}},96:function(e,t,n){"use strict";n.r(t);n(58);var r,a=n(1),s=n.n(a),o=n(31),c=n.n(o),i=n(15),u=n(18),l=n(17),p=n(7),j=n(16),d=n(6),f=n(37),b=n.n(f),h=n(55),O=n.n(h),g=(n(69),n(0)),x=function(e){return Object(g.jsx)("div",{children:e.isAuth?Object(g.jsxs)("div",{children:[Object(g.jsx)(d.b,{to:"/profile",children:e.login}),Object(g.jsx)("button",{onClick:e.logout,children:"LOGOUT"})]}):Object(g.jsx)(d.b,{to:"/login",children:"Login"})})},m=n(20),P=n(13),v=n.n(P),_=n(19),C=n(23),w=n(2),T=m.create({baseURL:"https://social-network.samuraijs.com/api/1.0/",withCredentials:!0,headers:{"API-KEY":"4b630712-4167-4357-a059-9386551b1200"}}),I=function(e){return T.post("follow/".concat(e)).then((function(e){return e.data}))},k=function(e){return T.delete("follow/".concat(e)).then((function(e){return e.data}))},y=function(e,t){return T.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},N=function(e){return T.get("profile/".concat(e)).then((function(e){return e.data}))},U=function(e){return T.get("profile/status/".concat(e)).then((function(e){return e.data}))},A=function(e){return T.put("profile/status",{status:e}).then((function(e){return e.data}))},S=function(e){var t=new FormData;return t.append("image",e),T.put("profile/photo",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){return e.data}))},E=function(e){return T.put("profile",e).then((function(e){return e.data}))},D={getAuthData:function(){var e=Object(C.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.get("auth/me");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),login:function(){var e=Object(C.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.post("auth/login",{email:t.login,password:t.password,rememberMe:t.rememberMe||!1,captcha:t.captcha||!1});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),logout:function(){return T.delete("auth/login").then((function(e){return e.data}))},getCaptchaURL:function(){return T.get("/security/get-captcha-url").then((function(e){return e.data}))}},L=n(12),W="./my-app/auth/SET_USER_DATA",R="./my-app/auth/SET_CAPTCHA_URL",M={id:null,login:null,email:null,isAuth:!1,captchaURL:null},F=function(e,t){return{type:W,data:e,isAuth:t}},H=function(e){return{type:R,captchaURL:e}},G=function(){return function(e){return D.getAuthData().then((function(t){t.resultCode?e(F(null,!1)):e(F(t.data,!0))}))}},B=function(){return function(e){D.getCaptchaURL().then((function(t){e(H(t.url))}))}},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case W:return Object(w.a)(Object(w.a)(Object(w.a)({},e),t.data),{},{isAuth:t.isAuth});case R:return Object(w.a)(Object(w.a)({},e),{},{captchaURL:t.captchaURL});default:return e}},K=function(e){return e.auth.id},Q=function(e){return e.auth.login},q=function(e){return e.auth.isAuth},V=function(e){return e.auth.captchaURL},Y=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).componentDidMount=function(){},e.render=function(){return Object(g.jsx)(x,{logout:e.props.logout,isAuth:e.props.isAuth,login:e.props.login})},e}return n}(s.a.Component),Z=Object(p.b)((function(e){return{isAuth:q(e),login:Q(e)}}),(function(e){return{logout:function(){e((function(e){D.logout().then((function(t){t.resultCode?console.log("warning"):e(F(null,!1))}))}))}}}))(Y),J=function(e){return Object(g.jsxs)("header",{className:O.a.header,children:[Object(g.jsx)(d.b,{to:"/profile",children:Object(g.jsx)("img",{src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT53K9N8zHCT83D67nH228rxKxkS6RMojtknA&usqp=CAU=",alt:"logo"})}),Object(g.jsx)(Z,{})]})},X=n(40),$=n.n(X),ee=n(41),te=n.n(ee),ne=function(e){return Object(g.jsx)("li",{className:te.a.navItem,children:Object(g.jsx)(d.b,{to:e.linkTo,activeClassName:te.a.active,children:e.linkName})})},re=function(e){var t=e.sidebarData.navItems.map((function(e){return Object(g.jsx)(ne,{linkTo:e.linkTo,linkName:e.linkName},e.id)}));return Object(g.jsx)("nav",{className:$.a.nav,children:Object(g.jsx)("ul",{className:$.a.navList,children:t})})},ae=n(30),se=n.n(ae),oe=(n(93),n(33)),ce=n.n(oe),ie=function(e){return Object(g.jsxs)("div",{className:ce.a.addNewPostWrapper,children:[Object(g.jsx)("textarea",{onChange:function(t){e.updatePostText(t.target.value)},className:ce.a.addPostText,value:e.newPostText}),Object(g.jsx)("button",{onClick:e.addNewPost,className:ce.a.addPostButton,children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435"})]})},ue=(n(94),n(22)),le=n.n(ue),pe=function(e){return Object(g.jsxs)("div",{className:le.a.postWrapper,children:[Object(g.jsxs)("div",{className:le.a.row,children:[Object(g.jsx)("div",{className:le.a.userAvatar,children:Object(g.jsx)("img",{src:"https://arbordayblog.org/wp-content/uploads/2018/06/oak-tree-sunset-iStock-477164218.jpg",alt:"userAvatar"})}),Object(g.jsx)("div",{className:le.a.postText,children:e.postText})]}),Object(g.jsxs)("div",{className:le.a.row,children:[Object(g.jsx)("div",{className:le.a.likeButton,children:Object(g.jsx)("span",{children:"\u041c\u043d\u0435 \u043d\u0440\u0430\u0432\u0438\u0442\u0441\u044f"})}),Object(g.jsx)("div",{className:le.a.likesCount,children:e.likesCount})]})]})},je=function(e){var t=e.posts.map((function(e){return Object(g.jsx)(pe,{postText:e.postText,likesCount:e.likesCount},e.id)}));return Object(g.jsx)("div",{children:t})},de=function(e){return Object(g.jsxs)("div",{children:[Object(g.jsx)(ie,{newPostText:e.newPostText,addNewPost:e.addNewPost,updatePostText:e.updatePostText}),Object(g.jsx)(je,{posts:e.posts})]})},fe=s.a.memo(de),be=n(21),he=n(27),Oe=n.n(he),ge=n.p+"static/media/preloader.44cef10a.svg",xe=function(){return Object(g.jsx)("div",{children:Object(g.jsx)("img",{src:ge,alt:"preloader"})})},me=s.a.memo((function(e){var t=Object(a.useState)(!1),n=Object(be.a)(t,2),r=n[0],s=n[1],o=Object(a.useState)(e.status),c=Object(be.a)(o,2),i=c[0],u=c[1];Object(a.useEffect)((function(){u(e.status)}),[e.status]);return Object(g.jsx)("div",{children:r?Object(g.jsx)("input",{onChange:function(e){u(e.target.value)},onBlur:function(){s(!1),e.updateUserStatusThunkCreator(i)},type:"text",value:i,autoFocus:!0}):Object(g.jsx)("span",{onDoubleClick:function(){e.isOwner&&s(!0)},children:e.status})})})),Pe=n(14),ve=s.a.memo((function(e){var t=e.profileInfo,n=e.deactivateEditMode,r=e.updateProfileInfoThunkCreator,a=Object.keys(t.contacts).map((function(e){return Object(g.jsxs)("div",{children:[Object(g.jsxs)("span",{children:[e,":"]}),Object(g.jsx)(Pe.a,{name:"contacts."+e,children:function(t){var n=t.input,r=t.meta;return Object(g.jsxs)("div",{children:[Object(g.jsx)("input",Object(w.a)(Object(w.a)({},n),{},{placeholder:e+" address",type:"text"})),Object(g.jsx)("span",{children:r.touched&&r.error})]})}})]},e)}));return Object(g.jsx)(Pe.b,{initialValues:Object(w.a)({},t),onSubmit:function(e){return r(e,t.userId).then((function(e){if(e)return e;n()}))},children:function(e){return Object(g.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(g.jsx)("div",{children:Object(g.jsx)("button",{type:"submit",children:"Enter"})}),e.submitError&&Object(g.jsx)("div",{className:"error",children:e.submitError}),Object(g.jsxs)("div",{children:[Object(g.jsx)("span",{children:"\u0418\u043c\u044f: "}),Object(g.jsx)(Pe.a,{name:"fullName",children:function(e){var t=e.input,n=e.meta;return Object(g.jsxs)("div",{children:[Object(g.jsx)("input",Object(w.a)(Object(w.a)({},t),{},{placeholder:"Name",type:"text"})),Object(g.jsx)("span",{children:n.touched&&n.error})]})}})]}),Object(g.jsxs)("div",{children:[Object(g.jsx)("span",{children:"\u041e\u0431\u043e \u043c\u043d\u0435: "}),Object(g.jsx)(Pe.a,{name:"aboutMe",children:function(e){var t=e.input,n=e.meta;return Object(g.jsxs)("div",{children:[Object(g.jsx)("input",Object(w.a)(Object(w.a)({},t),{},{placeholder:"About me",type:"text"})),Object(g.jsx)("span",{children:n.touched&&n.error})]})}})]}),Object(g.jsxs)("div",{children:[Object(g.jsx)("span",{children:"\u041c\u043e\u0438 \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u044b :"}),a]})]})}})})),_e=s.a.memo((function(e){var t=Object(a.useState)(e.profileInfo),n=Object(be.a)(t,2),r=n[0],s=n[1];Object(a.useEffect)((function(){s(e.profileInfo)}),[e.profileInfo]);var o=Object(a.useState)(!1),c=Object(be.a)(o,2),i=c[0],u=c[1];return r?Object(g.jsxs)("div",{className:Oe.a.userPersonalDataWrapper,children:[Object(g.jsxs)("div",{className:Oe.a.userAvatarWrapper,children:[Object(g.jsx)("div",{className:Oe.a.userAvatar,children:Object(g.jsx)("img",{src:r.photos.large?r.photos.large:"https://arbordayblog.org/wp-content/uploads/2018/06/oak-tree-sunset-iStock-477164218.jpg",alt:"avatar"})}),e.isOwner&&Object(g.jsx)("input",{type:"file",onChange:function(t){e.updateProfilePhotoThunkCreator(t.target.files[0])}})]}),Object(g.jsxs)("div",{className:Oe.a.userInfo,children:[Object(g.jsx)(me,{isOwner:e.isOwner,status:e.status,updateUserStatusThunkCreator:e.updateUserStatusThunkCreator}),i&&e.isOwner?Object(g.jsx)(ve,{profileInfo:r,deactivateEditMode:function(){u(!1)},updateProfileInfoThunkCreator:e.updateProfileInfoThunkCreator}):Object(g.jsx)(Ce,{profileInfo:r,activateEditMode:function(){u(!0)},isOwner:e.isOwner})]})]}):Object(g.jsx)(xe,{})})),Ce=s.a.memo((function(e){var t=e.profileInfo,n=e.activateEditMode,r=e.isOwner,a=Object.keys(t.contacts).map((function(e){return t.contacts[e]?Object(g.jsxs)("div",{children:[Object(g.jsxs)("span",{children:[e,":"]}),Object(g.jsx)("span",{children:Object(g.jsx)("a",{href:"#",children:t.contacts[e]})})]},e):null}));return Object(g.jsxs)("div",{className:Oe.a.userInfo,children:[r?Object(g.jsx)("div",{children:Object(g.jsx)("button",{onClick:n,children:"Edit Profile Info"})}):null,Object(g.jsxs)("div",{children:[Object(g.jsx)("span",{children:"\u0418\u043c\u044f: "}),Object(g.jsx)("span",{children:t.fullName})]}),Object(g.jsxs)("div",{children:[Object(g.jsx)("span",{children:"\u041e\u0431\u043e \u043c\u043d\u0435: "}),Object(g.jsx)("span",{children:t.aboutMe})]}),Object(g.jsxs)("div",{children:[Object(g.jsx)("span",{children:"\u041c\u043e\u0438 \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u044b :"}),a]}),Object(g.jsxs)("div",{children:[Object(g.jsx)("span",{}),Object(g.jsx)("span",{children:t.fullname})]})]})})),we=_e,Te=s.a.memo((function(e){var t=e.updateUserStatusThunkCreator,n=e.profileInfo,r=e.status,a=e.isOwner,s=e.updateProfilePhotoThunkCreator,o=e.posts,c=e.newPostText,i=e.updatePostText,u=e.addNewPost,l=e.updateProfileInfoThunkCreator;return Object(g.jsxs)("div",{className:se.a.profileWrapper,children:[Object(g.jsx)("div",{className:se.a.userPersonalData,children:Object(g.jsx)(we,{updateUserStatusThunkCreator:t,profileInfo:n,status:r,isOwner:a,updateProfilePhotoThunkCreator:s,updateProfileInfoThunkCreator:l})}),Object(g.jsxs)("div",{className:se.a.userPosts,children:[Object(g.jsx)("h2",{className:se.a.header,children:"\u041c\u043e\u0438 \u043f\u043e\u0441\u0442\u044b"}),Object(g.jsx)(fe,{posts:o,newPostText:c,updatePostText:i,addNewPost:u})]})]})})),Ie=n(24),ke="./my-app/profilePage/ADD_NEW_POST",ye="./my-app/profilePage/UPDATE_POST_TEXT",Ne="./my-app/profilePage/SET_PROFILE_INFO",Ue="./my-app/profilePage/SET_USER_STATUS",Ae="./my-app/profilePage/CHANGE_IS_OWNER",Se="./my-app/profilePage/UPDATE_PROFILE_PHOTOS",Ee={newPostText:"",postsData:[{id:1,postText:"\u041f\u0435\u0440\u0432\u044b\u0439 \u043f\u043e\u0441\u0442",likesCount:"4"},{id:2,postText:"\u0412\u0442\u043e\u0440\u043e\u0439 \u043f\u043e\u0441\u0442",likesCount:"1"},{id:3,postText:"\u0422\u0440\u0435\u0442\u0438\u0439 \u043f\u043e\u0441\u0442",likesCount:"0"},{id:4,postText:"\u041f\u0440\u043e\u0441\u0442\u043e \u043f\u043e\u0441\u0442",likesCount:"4"}],profileInfo:null,status:null,isOwner:!1},De=function(e){return{type:Ne,profileInfo:e}},Le=function(e){return function(t){N(e).then((function(e){if(e.resulCode)return null;t(De(e))}))}},We=function(e){return{type:Ue,status:e}},Re=function(e){return{type:Se,photos:e}},Me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ke:var n={id:e.postsData.length+1,postText:e.newPostText,likesCount:0};return Object(w.a)(Object(w.a)({},e),{},{postsData:[].concat(Object(Ie.a)(e.postsData),[n]),newPostText:""});case ye:return Object(w.a)(Object(w.a)({},e),{},{newPostText:t.text});case Ne:return Object(w.a)(Object(w.a)({},e),{},{profileInfo:t.profileInfo});case Ue:return Object(w.a)(Object(w.a)({},e),{},{status:t.status});case Ae:return Object(w.a)(Object(w.a)({},e),{},{isOwner:t.isOwner});case Se:return Object(w.a)(Object(w.a)({},e),{},{profileInfo:Object(w.a)(Object(w.a)({},e.profileInfo),{},{photos:t.photos})});default:return e}},Fe=n(4),He=n(51),Ge=function(e){return e.profilePage.newPostText},Be=function(e){return e.profilePage.postsData},ze=function(e){return e.profilePage.profileInfo},Ke=function(e){return e.profilePage.status},Qe=function(e){return e.profilePage.isOwner},qe=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).updateUserId=function(){var t=e.props.match.params.userId?e.props.match.params.userId:e.props.myProfileId;t==e.props.myProfileId?e.props.changeIsOwnerActionCreator(!0):e.props.changeIsOwnerActionCreator(!1),e.props.getProfileInfoThunkCreator(t),e.props.getUserStatusThunkCreator(t)},e.componentDidMount=function(){e.updateUserId()},e.componentDidUpdate=function(t,n){e.props.match.params.userId!=t.match.params.userId&&e.updateUserId()},e.render=function(){return Object(g.jsx)(Te,Object(w.a)({},e.props))},e}return n}(s.a.PureComponent),Ve=Object(j.d)(Fe.g,Object(p.b)((function(e){return{posts:Be(e),profileInfo:ze(e),newPostText:Ge(e),myProfileId:K(e),status:Ke(e),isOwner:Qe(e)}}),(function(e){return{updatePostText:function(t){e(function(e){return{type:ye,text:e}}(t))},addNewPost:function(){e({type:ke})},setProfileInfo:function(t){e(De(t))},getProfileInfoThunkCreator:function(t){e(Le(t))},getUserStatusThunkCreator:function(t){e(function(e){return function(t){U(e).then((function(e){t(We(e))}))}}(t))},updateUserStatusThunkCreator:function(t){e(function(e){return function(t){A(e).then((function(n){t(We(e))}))}}(t))},changeIsOwnerActionCreator:function(t){e(function(e){return{type:Ae,isOwner:e}}(t))},updateProfilePhotoThunkCreator:function(t){e(function(e){return function(t){S(e).then((function(e){e.resultCode||t(Re(e.data.photos))}))}}(t))},updateProfileInfoThunkCreator:function(t,n){return e(function(e,t){return function(n){return E(e).then((function(e){if(e.resultCode)return Object(_.a)({},L.a,e.messages[0]);n(Le(t))}))}}(t,n))}}})),He.a)(qe),Ye="./my-app/usersPage/FOLLOW",Ze="./my-app/usersPage/UNFOLLOW",Je="./my-app/usersPage/SET_USERS",Xe="./my-app/usersPage/SET_CURRENT_PAGE",$e="./my-app/usersPage/SET_TOTAL_USERS_COUNT",et="./my-app/usersPage/TOGGLE_IS_FETCHING",tt="./my-app/usersPage/TOGGLE_FOLLOWING_IN_PROGRESS",nt={users:[],usersOnPage:10,totalUsersCount:0,currentPage:1,isFetching:!1,followingInProgress:[],pagesInPortion:5},rt=function(e){return{type:$e,totalUsersCount:e}},at=function(){return{type:et}},st=function(e,t){return{type:tt,isFollowingInProgress:e,userId:t}},ot=function(e){return function(t){t(st(!0,e)),I(e).then((function(n){0==n.resultCode&&(t(function(e){return{type:Ye,userId:e}}(e)),t(st(!1,e)))}))}},ct=function(e){return function(t){t(st(!0,e)),k(e).then((function(n){0==n.resultCode&&(t(function(e){return{type:Ze,userId:e}}(e)),t(st(!1,e)))}))}},it=function(e,t){return function(n){n(at()),y(e,t).then((function(e){var t;n(at()),n((t=e.items,{type:Je,users:t})),n(rt(e.totalCount))}))}},ut=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ye:return Object(w.a)(Object(w.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userId?(e.followed=!0,e):e}))});case Ze:return Object(w.a)(Object(w.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userId?(e.followed=!1,e):e}))});case Je:return Object(w.a)(Object(w.a)({},e),{},{users:Object(Ie.a)(t.users)});case Xe:return Object(w.a)(Object(w.a)({},e),{},{currentPage:t.currentPage});case $e:return Object(w.a)(Object(w.a)({},e),{},{totalUsersCount:t.totalUsersCount});case et:return Object(w.a)(Object(w.a)({},e),{},{isFetching:!e.isFetching});case tt:return Object(w.a)(Object(w.a)({},e),{},{followingInProgress:t.isFollowingInProgress?[].concat(Object(Ie.a)(e.followingInProgress),[t.userId]):e.followingInProgress.filter((function(e){return e!=t.userId}))});default:return e}},lt=n(25),pt=n.n(lt),jt=function(e){var t,n=function(){e.unfollowUserThunkCreator(e.id)};return Object(g.jsxs)("div",{className:pt.a.userWrapper,children:[Object(g.jsx)("div",{className:pt.a.followButton,children:e.followed?Object(g.jsx)("button",{disabled:e.followingInProgress.some((function(t){return t==e.id})),onClick:n,children:"UNFOLLOW"}):Object(g.jsx)("button",(t={disabled:e.followingInProgress.some((function(t){return t==e.id})),onClick:n},Object(_.a)(t,"onClick",(function(){e.followUserThunkCreator(e.id)})),Object(_.a)(t,"children","FOLLOW"),t))}),Object(g.jsx)(d.b,{to:"profile/"+e.id,children:Object(g.jsx)("div",{className:pt.a.userPhoto,children:Object(g.jsx)("img",{src:null!==e.userPhoto?e.userPhoto:"https://upload.wikimedia.org/wikipedia/en/thumb/7/72/Avatar_icon_green.svg/1024px-Avatar_icon_green.svg.png",alt:e.name})})}),Object(g.jsxs)("div",{className:pt.a.userInfo,children:[Object(g.jsx)("span",{className:pt.a.userName,children:e.name}),null!==e.status?Object(g.jsx)("div",{className:pt.a.userStatus,children:e.status}):null]})]})},dt=(n(95),s.a.memo((function(e){var t=e.currentPortion,n=e.changeCurrentPortion;return 1==e.lastPortion?null:Object(g.jsxs)("div",{children:[Object(g.jsx)("button",{onClick:function(){n(1)},disabled:1==t,children:"<<"}),Object(g.jsx)("button",{onClick:function(){n(t-1)},disabled:1==t,children:"<"})]})}))),ft=s.a.memo((function(e){var t=e.currentPortion,n=e.changeCurrentPortion,r=e.lastPortion;return 1==r?null:Object(g.jsxs)("div",{children:[Object(g.jsx)("button",{onClick:function(){n(t+1)},disabled:t==r,children:">"}),Object(g.jsx)("button",{onClick:function(){n(r)},disabled:t==r,children:">>"})]})})),bt=s.a.memo((function(e){var t,n=e.totalPages,r=e.setCurrentPage,s=e.pagesInPortion,o=Object(a.useState)(1),c=Object(be.a)(o,2),i=c[0],u=c[1],l=Math.ceil(n/s),p=(i-1)*s+1,j=p+(s-1);j>n&&(j=n);for(var d=[],f=p;f<=j;f++)d.push(f);return t=d.map((function(e){return Object(g.jsxs)("span",{onClick:function(){return r(e)},children:["| ",e," |"]},e)})),Object(g.jsxs)("div",{children:[Object(g.jsx)(dt,{currentPortion:i,changeCurrentPortion:u,lastPortion:l}),t,Object(g.jsx)(ft,{currentPortion:i,changeCurrentPortion:u,lastPortion:l})]})})),ht=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).setCurrentPage=function(t){e.props.setCurrentPage(t),e.props.setUsersThunkCreator(t,e.props.usersOnPage)},e.render=function(){var t=Math.ceil(e.props.totalUsersCount/e.props.usersOnPage);return Object(g.jsx)(bt,{isFetching:e.props.isFetching,totalPages:t,setCurrentPage:e.setCurrentPage,currentPage:e.props.currentPage,pagesInPortion:e.props.pagesInPortion})},e}return n}(s.a.Component),Ot=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).componentDidMount=function(){e.props.setUsersThunkCreator(e.props.currentPage,e.props.usersOnPage)},e.render=function(){var t=e.props.users.map((function(t){return Object(g.jsx)(jt,{id:t.id,name:t.name,status:t.status,followed:t.followed,userPhoto:t.photos.small,followUserThunkCreator:e.props.followUserThunkCreator,unfollowUserThunkCreator:e.props.unfollowUserThunkCreator,followingInProgress:e.props.followingInProgress,toggleFollowingInProgress:e.props.toggleFollowingInProgress},t.id)}));return Object(g.jsxs)("div",{children:[Object(g.jsx)("div",{children:Object(g.jsx)(ht,{pagesInPortion:e.props.pagesInPortion,totalUsersCount:e.props.totalUsersCount,setUsersThunkCreator:e.props.setUsersThunkCreator,isFetching:e.props.isFetching,setCurrentPage:e.props.setCurrentPage,usersOnPage:e.props.usersOnPage,currentPage:e.props.currentPage})}),e.props.isFetching?Object(g.jsx)(xe,{}):t]})},e}return n}(s.a.PureComponent),gt=n(56),xt=Object(gt.a)([function(e){return e.usersPage.users}],(function(e){return e})),mt=function(e){return e.usersPage.usersOnPage},Pt=function(e){return e.usersPage.pagesInPortion},vt=function(e){return e.usersPage.totalUsersCount},_t=function(e){return e.usersPage.currentPage},Ct=function(e){return e.usersPage.isFetching},wt=function(e){return e.usersPage.followingInProgress},Tt=Object(p.b)((function(e){return{users:xt(e),totalUsersCount:vt(e),currentPage:_t(e),usersOnPage:mt(e),isFetching:Ct(e),followingInProgress:wt(e),pagesInPortion:Pt(e)}}),(function(e){return{setTotalUsersCount:function(t){e(rt(t))},setCurrentPage:function(t){e(function(e){return{type:Xe,currentPage:e}}(t))},toggleIsFetching:function(){e(at())},toggleFollowingInProgress:function(t,n){e(st(t,n))},followUserThunkCreator:function(t){e(ot(t))},unfollowUserThunkCreator:function(t){e(ct(t))},setUsersThunkCreator:function(t,n){e(it(t,n))}}}))(Ot),It=function(e){if(!e)return"This field is required"},kt=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.reduce((function(t,n){return t||n(e)}),void 0)}},yt=(r=30,function(e){if(e&&!(e.length<=r))return"Symbols length must be less than "+r}),Nt=function(e){var t=function(){var t=Object(C.a)(v.a.mark((function t(n){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.login(n));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(g.jsx)(Pe.b,{initialValues:{},onSubmit:t,captchaURL:e.captchaURL,children:function(e){return Object(g.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(g.jsx)("div",{children:Object(g.jsx)(Pe.a,{name:"login",validate:kt(It,yt),children:function(e){var t=e.input,n=e.meta;return Object(g.jsxs)("div",{children:[Object(g.jsx)("input",Object(w.a)(Object(w.a)({},t),{},{placeholder:"Login",type:"text"})),Object(g.jsx)("span",{children:n.touched&&n.error})]})}})}),Object(g.jsx)("div",{children:Object(g.jsx)(Pe.a,{name:"password",validate:kt(It),children:function(e){var t=e.input,n=e.meta;return Object(g.jsxs)("div",{children:[Object(g.jsx)("input",Object(w.a)(Object(w.a)({},t),{},{placeholder:"Password",type:"text"})),Object(g.jsx)("span",{children:n.touched&&n.error})]})}})}),Object(g.jsx)("div",{children:Object(g.jsx)(Pe.a,{name:"rememberMe",children:function(e){var t=e.input;e.meta;return Object(g.jsx)("input",Object(w.a)(Object(w.a)({},t),{},{type:"checkbox",placeholder:"rememberMe"}))}})}),e.captchaURL?Object(g.jsxs)("div",{children:[Object(g.jsx)("img",{src:e.captchaURL,alt:"captcha"}),Object(g.jsx)(Pe.a,{name:"captcha",children:function(e){var t=e.input;e.meta;return Object(g.jsx)("input",Object(w.a)(Object(w.a)({},t),{},{type:"text",placeholder:"Captcha"}))}})]}):null,e.submitError&&Object(g.jsx)("div",{className:"error",children:e.submitError}),Object(g.jsx)("div",{children:Object(g.jsx)("button",{type:"submit",children:"Login"})})]})}})},Ut=Object(p.b)((function(e){return{isAuth:q(e),captchaURL:V(e)}}),(function(e){return{login:function(t){return e(function(e){return function(t){return function(){var e=Object(C.a)(v.a.mark((function e(n){var r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.login(n);case 2:if((r=e.sent).resultCode){e.next=8;break}t(H(null)),t(G()),e.next=14;break;case 8:if(10!=r.resultCode){e.next=13;break}return t(B()),e.abrupt("return",Object(_.a)({},L.a,r.messages[0]));case 13:return e.abrupt("return",Object(_.a)({},L.a,r.messages[0]));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(e)}}(t))}}}))((function(e){return e.isAuth?Object(g.jsx)(Fe.a,{to:"/profile"}):Object(g.jsxs)("div",{children:[Object(g.jsx)("h1",{children:"LOGIN"}),Object(g.jsx)(Nt,{login:e.login,captchaURL:e.captchaURL})]})})),At="./my-app/app/SET_INITIALIZED_SUCCESS",St={isAppInitialized:!1},Et=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:St,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case At:return Object(w.a)(Object(w.a)({},e),{},{isAppInitialized:!0});default:return e}},Dt=function(){return function(e){e(G()).then((function(){e({type:At})}))}},Lt=function(e){return e.app.isAppInitialized},Wt=n(52),Rt={navItems:[{id:1,linkTo:"/profile",linkName:"Profile"},{id:2,linkTo:"/dialogs",linkName:"Messages"},{id:3,linkTo:"/news",linkName:"News"},{id:4,linkTo:"/music",linkName:"Music"},{id:5,linkTo:"/users",linkName:"Users"}]},Mt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"fdgfd":break;default:return e}},Ft=n(57),Ht=Object(j.c)({profilePage:Me,dialogsPage:Wt.b,sidebar:Mt,usersPage:ut,auth:z,app:Et}),Gt=Object(j.e)(Ht,Object(j.a)(Ft.a));window.store=Gt;var Bt=Gt,zt=s.a.lazy((function(){return n.e(3).then(n.bind(null,100))})),Kt=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).componentDidMount=function(){e.props.appInitialization()},e.render=function(){return e.props.isAppInitialized?Object(g.jsxs)("div",{className:b.a.appWrapper,children:[Object(g.jsx)(J,{}),Object(g.jsx)(re,{sidebarData:e.props.store.getState().sidebar}),Object(g.jsx)("div",{className:b.a.appContent,children:Object(g.jsxs)(Fe.d,{children:[Object(g.jsx)(Fe.b,{exact:!0,path:"/",render:function(){return Object(g.jsx)(Fe.a,{to:"/profile"})}}),Object(g.jsx)(Fe.b,{path:"/profile/:userId?",render:function(){return Object(g.jsx)(Ve,{})}}),Object(g.jsx)(Fe.b,{path:"/dialogs",render:function(){return Object(g.jsx)(s.a.Suspense,{fallback:Object(g.jsx)(xe,{}),children:Object(g.jsx)(zt,{})})}}),Object(g.jsx)(Fe.b,{path:"/users",render:function(){return Object(g.jsx)(Tt,{})}}),Object(g.jsx)(Fe.b,{path:"/login",render:function(){return Object(g.jsx)(Ut,{})}}),Object(g.jsx)(Fe.b,{path:"*",render:function(){return Object(g.jsx)("div",{children:"page 404"})}})]})})]}):Object(g.jsx)(xe,{})},e}return n}(s.a.Component),Qt=Object(j.d)(Object(p.b)((function(e){return{isAppInitialized:Lt(e)}}),(function(e){return{appInitialization:function(){e(Dt())},getAuthDataThunkCreator:function(){e(G())}}})))(Kt),qt=function(){return Object(g.jsx)(p.a,{store:Bt,children:Object(g.jsx)(d.a,{children:Object(g.jsx)(Qt,{store:Bt})})})};c.a.render(Object(g.jsx)(qt,{}),document.getElementById("root"))}},[[96,1,2]]]);
//# sourceMappingURL=main.5bcecb29.chunk.js.map