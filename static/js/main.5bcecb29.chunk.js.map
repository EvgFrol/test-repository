{"version":3,"sources":["components/Profile/UserPosts/PublishedPosts/Post/Post.module.css","components/Users/User/User.module.css","components/Profile/UserPersonalData/UserPersonalData.module.css","components/Profile/Profile.module.css","components/Profile/UserPosts/AddNewPost/AddNewPost.module.css","App.module.css","components/Nav/Nav.module.css","components/Nav/NavItem/NavItem.module.css","hoc/withAuthRedirect.jsx","Redux/dialogsPageReducer.js","components/Header/Header.module.css","components/Users/Pagination/Pagination.module.css","validator/validate.js","components/Header/LoginPanel/LoginPanel.jsx","api/api.js","Redux/authReducer.js","Redux/auth-selector.js","components/Header/LoginPanel/LoginPanelContainer.jsx","components/Header/Header.jsx","components/Nav/NavItem/NavItem.jsx","components/Nav/Nav.jsx","components/Profile/UserPosts/AddNewPost/AddNewPost.jsx","components/Profile/UserPosts/PublishedPosts/Post/Post.jsx","components/Profile/UserPosts/PublishedPosts/PublishedPosts.jsx","components/Profile/UserPosts/UserPosts.jsx","assets/preloader.svg","components/common/Preloader/Preloader.jsx","components/Profile/UserPersonalData/UserStatus/UserStatus.jsx","components/Profile/UserPersonalData/UserEditInfo/UserEditInfo.jsx","components/Profile/UserPersonalData/UserPersonalData.jsx","components/Profile/Profile.jsx","Redux/profilePageReducer.js","Redux/profilePage-selector.js","components/Profile/ProfileContainer.jsx","Redux/usersPageReducer.js","components/Users/User/User.jsx","components/Users/Pagination/Pagination.jsx","components/Users/Pagination/PaginationAPIContainer.jsx","components/Users/Users.jsx","Redux/usersPage-selector.js","components/Users/UsersContainer.jsx","components/Login/Login.jsx","Redux/appReducer.js","Redux/app-selector.js","Redux/sidebarReducer.js","Redux/redux-store.js","App.jsx","index.js"],"names":["module","exports","withAuthRedirect","Component","connect","state","isAuth","auth","props","to","UPDATE_MESSAGE_TEXT","ADD_NEW_MESSAGE","initialState","newMessageText","dialogsData","id","name","messagesData","messageText","updateMessageTextActionCreator","text","type","addNewMessageActionCreator","dialogsPageReducer","action","newMessage","length","maxLength","LoginPanel","login","onClick","logout","instance","axios","baseURL","withCredentials","headers","usersAPI","userId","post","then","response","data","delete","currentPage","usersOnPage","get","profileAPI","status","put","dataImage","formData","FormData","append","ProfileInfoData","authAPI","getAuthData","a","loginData","email","password","rememberMe","captcha","getCaptchaURL","SET_USER_DATA","SET_CAPTCHA_URL","defaultState","captchaURL","setUserDataActionCreator","setCaptchaURLActionCreator","getAuthDataThunkCreator","dispatch","resultCode","getCaptchaURLThunkCreator","url","authReducer","getId","getLogin","getIsAuth","LoginPanelAPIContainer","componentDidMount","render","React","console","log","Header","className","classes","header","src","alt","LoginPanelContainer","NavItem","styles","navItem","linkTo","activeClassName","active","linkName","Nav","navItemsElements","sidebarData","navItems","map","n","nav","navList","AddNewPost","addNewPostWrapper","onChange","e","updatePostText","target","value","addPostText","newPostText","addNewPost","addPostButton","Post","postWrapper","row","userAvatar","postText","likeButton","likesCount","PublishedPosts","PostElements","posts","p","UserPosts","memo","Preloader","preloaderSRC","UserStatus","useState","editMode","changeEditMode","changeStatus","useEffect","onBlur","updateUserStatusThunkCreator","autoFocus","onDoubleClick","isOwner","UserEditInfo","profileInfo","deactivateEditMode","updateProfileInfoThunkCreator","showContacts","Object","keys","contacts","key","input","meta","placeholder","touched","error","initialValues","onSubmit","handleSubmit","submitError","UserPersonalData","changeProfileInfo","editProfileInfo","setEditProfileInfo","userPersonalDataWrapper","userAvatarWrapper","photos","large","updateProfilePhotoThunkCreator","files","userInfo","UserInfo","activateEditMode","href","fullName","aboutMe","fullname","Profile","profileWrapper","userPersonalData","userPosts","ADD_NEW_POST","UPDATE_POST_TEXT","SET_PROFILE_INFO","SET_USER_STATUS","CHANGE_IS_OWNER","UPDATE_PROFILE_PHOTOS","postsData","setProfileInfoActionCreator","getProfileInfoThunkCreator","resulCode","setUserStatusActionCreator","updateProfilePhotoActionCreator","profilePageReducer","newPost","getNewPostText","profilePage","getPostsData","getProfileInfo","getStatus","getIsOwner","ProfileAPIContainer","updateUserId","match","params","myProfileId","changeIsOwnerActionCreator","getUserStatusThunkCreator","componentDidUpdate","prevProps","prevState","PureComponent","compose","withRouter","updatePostTextActionCreator","setProfileInfo","photoData","profileInfoData","FORM_ERROR","messages","FOLLOW","UNFOLLOW","SET_USERS","SET_CURRENT_PAGE","SET_TOTAL_USERS_COUNT","TOGGLE_IS_FETCHING","TOGGLE_FOLLOWING_IN_PROGRESS","users","totalUsersCount","isFetching","followingInProgress","pagesInPortion","setTotalUsersCountActionCreator","usersCount","toggleIsFetchingActionCreator","toggleFollowingInProgressActionCreator","isFollowingInProgress","followUserThunkCreator","followActionCreator","unfollowUserThunkCreator","unfollowActionCreator","setUsersThunkCreator","items","totalCount","usersPageReducer","user","followed","filter","User","unfollowUser","userWrapper","followButton","disabled","some","userPhoto","userName","userStatus","PrevButtons","currentPortion","changeCurrentPortion","lastPortion","NextButtons","Pagination","pagesElements","totalPages","setCurrentPage","totalPortionsCount","Math","ceil","firstPageInCurrentPortion","lastPageInCurrentPortion","pages","i","push","page","PaginationAPIContainer","Users","usersElements","small","toggleFollowingInProgress","getUsers","createSelector","usersPage","getUsersOnPage","getPagesInPortion","getTotalUsersCount","getCurrentPage","getIsFetching","getFollowingInProgress","UsersContainer","setTotalUsersCount","setCurrentPageActionCreator","toggleIsFetching","required","composeValidators","validators","reduce","validator","undefined","maxSymbolsLength30","LoginForm","onFormSubmit","values","validate","loginThunkCreator","SET_INITIALIZED_SUCCESS","isAppInitialized","appReducer","appInitialization","getIsAppInitialized","app","sidebarReducer","reducers","combineReducers","dialogsPage","sidebar","store","createStore","applyMiddleware","thunkMiddleware","window","DialogsContainer","lazy","App","appWrapper","getState","appContent","exact","path","ProfileContainer","Suspense","fallback","AppContainer","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.5bcecb29.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"postWrapper\":\"Post_postWrapper__3K_fb\",\"row\":\"Post_row__o0PMz\",\"userAvatar\":\"Post_userAvatar__30ulQ\",\"postText\":\"Post_postText__3S6sg\",\"likeButton\":\"Post_likeButton__3EY1C\",\"likesCount\":\"Post_likesCount__3bakW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"userWrapper\":\"User_userWrapper__2xQ-c\",\"userPhoto\":\"User_userPhoto__1HYP9\",\"userInfo\":\"User_userInfo__3hNHQ\",\"userName\":\"User_userName__3FRpC\",\"userStatus\":\"User_userStatus__2TQoH\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"userPersonalDataWrapper\":\"UserPersonalData_userPersonalDataWrapper__iRHoW\",\"userAvatarWrapper\":\"UserPersonalData_userAvatarWrapper__2h3rN\",\"userAvatar\":\"UserPersonalData_userAvatar__214Zs\",\"userInfo\":\"UserPersonalData_userInfo__2y-7K\",\"userPosts\":\"UserPersonalData_userPosts__3ahOU\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"topProfilePicture\":\"Profile_topProfilePicture__3H_eC\",\"header\":\"Profile_header__1MLMH\",\"profileWrapper\":\"Profile_profileWrapper__2N-o7\",\"userPersonalData\":\"Profile_userPersonalData__1Y_oB\",\"userPosts\":\"Profile_userPosts__mfEuC\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"addNewPostWrapper\":\"AddNewPost_addNewPostWrapper__3VvKU\",\"addPostText\":\"AddNewPost_addPostText__15XwM\",\"addPostButton\":\"AddNewPost_addPostButton__3iRWg\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"appWrapper\":\"App_appWrapper__1ACwV\",\"appContent\":\"App_appContent__ZqFuH\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"nav\":\"Nav_nav__3D-l-\",\"navList\":\"Nav_navList__2jQZA\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"navItem\":\"NavItem_navItem__1TNPW\",\"active\":\"NavItem_active__2aBad\"};","import React from 'react';\r\nimport {Redirect} from 'react-router-dom';\r\nimport {connect} from 'react-redux';\r\n\r\nexport let withAuthRedirect = (Component) => {\r\n\tlet ContainerComponent = (props)=>{\r\n\t\t\r\n\t\tif(!props.isAuth){return <Redirect to='login/' />}\r\n\t\t\r\n\t\treturn(\r\n\t\t\t<Component {...props} />\r\n\t\t)\r\n\t}\r\n\t\r\n\tlet mapStateToProps = (state) =>{\r\n\t\treturn {\r\n\t\t\tisAuth:state.auth.isAuth,\r\n\t\t}\r\n\t}\r\n\t\r\n\treturn connect(mapStateToProps,null)(ContainerComponent);\r\n\t\r\n}","let UPDATE_MESSAGE_TEXT = './my-app/dialogsPage/UPDATE_MESSAGE_TEXT',\r\n\tADD_NEW_MESSAGE = './my-app/dialogsPage/ADD_NEW_MESSAGE';\r\n\r\n\r\nlet initialState={\r\n\tnewMessageText:'',\r\n\tdialogsData:[\r\n\t\t{id:1, name:\"Masha\"},\r\n\t\t{id:2, name:\"Sasha\"},\r\n\t\t{id:3, name:\"Evgeny\"},\r\n\t\t{id:4, name:\"Dmitry\"},\r\n\t\t{id:5, name:\"Masha\"},\r\n\t],\r\n\tmessagesData:[\r\n\t\t{id:1, messageText:'Hello!'},\r\n\t\t{id:2, messageText:'How are you!'},\r\n\t\t{id:3, messageText:'=)'},\r\n\t],\r\n}\r\n\r\nlet dialogsPageReducer = (state=initialState, action) =>{\r\n\tswitch(action.type){\r\n\t\tcase UPDATE_MESSAGE_TEXT:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tnewMessageText:action.text,\r\n\t\t\t};\r\n\t\tbreak;\r\n\t\t\r\n\t\tcase ADD_NEW_MESSAGE:\r\n\t\t\tlet newMessage={\r\n\t\t\t\tid:state.messagesData.length+1,\r\n\t\t\t\tmessageText:state.newMessageText,\r\n\t\t\t}\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tmessagesData:[...state.messagesData, newMessage],\r\n\t\t\t\tnewMessageText:'',\r\n\t\t\t}\r\n\t\tbreak;\r\n\t\t\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}\r\n\r\nexport let updateMessageTextActionCreator = (text) =>{\r\n\treturn {\r\n\t\ttype:UPDATE_MESSAGE_TEXT,\r\n\t\ttext:text,\r\n\t};\r\n}\r\n\r\nexport let addNewMessageActionCreator = () =>{\r\n\treturn {\r\n\t\ttype:ADD_NEW_MESSAGE,\r\n\t};\r\n}\r\n\r\nexport default dialogsPageReducer;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header___BJgy\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"active\":\"Pagination_active__9L57R\"};","export let required =(value) =>{\r\n\tif(value){\r\n\t\treturn undefined;\r\n\t}\r\n\treturn 'This field is required';\r\n}\r\n\r\nexport let maxSymbolsLength = (maxLength) => (value) =>{\r\n\tif(!value || value.length<=maxLength){\r\n\t\treturn undefined;\r\n\t}\r\n\treturn 'Symbols length must be less than ' + maxLength;\r\n}\t","import React from 'react';\r\nimport {NavLink} from 'react-router-dom';\r\nimport styles from './LoginPanel.module.css';\r\n\r\nlet LoginPanel = (props) =>{\r\n\t\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t{props.isAuth ? \r\n\t\t\t\t(<div><NavLink to='/profile'>{props.login}</NavLink> \r\n\t\t\t\t<button onClick={props.logout} >LOGOUT</button></div>) : \r\n\t\t\t\t<NavLink to='/login'>Login</NavLink>\r\n\t\t\t}\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default LoginPanel;","import * as axios from 'axios';\r\n\r\nlet instance=axios.create({\r\n\tbaseURL:'https://social-network.samuraijs.com/api/1.0/',\r\n\twithCredentials:true,\r\n\theaders:{\r\n\t\t'API-KEY':'4b630712-4167-4357-a059-9386551b1200'\r\n\t}\r\n});\r\n\r\nexport let usersAPI={\r\n\tfollowUser(userId){\r\n\t\treturn instance.post(`follow/${userId}`).then(response=>{return response.data});\r\n\t},\r\n\tunfollowUser(userId){\r\n\t\treturn instance.delete(`follow/${userId}`).then(response=>{return response.data});\r\n\t},\r\n\tsetUsers(currentPage, usersOnPage){\r\n\t\treturn instance.get(`users?page=${currentPage}&count=${usersOnPage}`).then(response=>{return response.data});\r\n\t}\r\n}\r\n\r\nexport let profileAPI={\r\n\tgetProfileInfo(userId){\r\n\t\treturn instance.get(`profile/${userId}`).then(response=>{return response.data});\r\n\t},\r\n\tgetUserStatus(userId){\r\n\t\treturn instance.get(`profile/status/${userId}`).then(response=>{return response.data});\r\n\t},\r\n\tupdateUserStatus(status){\r\n\t\treturn instance.put(`profile/status`,{status:status}).then(response=>{return response.data});\r\n\t},\r\n\tupdateProfilePhoto(dataImage){\r\n\t\tlet formData = new FormData();\r\n\t\tformData.append(\"image\", dataImage);\r\n\t\treturn instance.put(`profile/photo`, formData, {headers:{'Content-Type': 'multipart/form-data'}}).then(response=>{return response.data});\r\n\t},\r\n\tupdateProfileInfo(ProfileInfoData){\r\n\t\treturn instance.put(`profile`, ProfileInfoData).then(response=>{return response.data});\r\n\t},\r\n}\r\n\r\nexport let authAPI={\r\n\tgetAuthData:async()=>{\r\n\t\tlet data = await instance.get(`auth/me`);\r\n\t\treturn data.data;\r\n\t},\r\n\tlogin:async(loginData)=>{\r\n\t\tlet data = await instance.post(`auth/login`,{email:loginData.login,password:loginData.password,rememberMe:loginData.rememberMe||false,captcha:loginData.captcha||false})\r\n\t\treturn data.data;\r\n\t},\r\n\tlogout:()=>{\r\n\t\treturn instance.delete(`auth/login`).then(response=>{return response.data});\r\n\t},\r\n\tgetCaptchaURL:()=>{\r\n\t\treturn instance.get(`/security/get-captcha-url`).then(response=>{return response.data});\r\n\t}\r\n}","import {authAPI} from './../api/api';\r\nimport { FORM_ERROR } from 'final-form';\r\n\r\nlet SET_USER_DATA = './my-app/auth/SET_USER_DATA';\r\nlet SET_CAPTCHA_URL = './my-app/auth/SET_CAPTCHA_URL';\r\n\t\r\n\r\nlet defaultState={\r\n\tid:null,\r\n\tlogin:null,\r\n\temail:null,\r\n\tisAuth:false,\r\n\tcaptchaURL:null\r\n}\r\n\r\nlet authReducer = (state=defaultState, action) =>{\r\n\tswitch(action.type){\r\n\t\tcase SET_USER_DATA:\r\n\t\t\treturn{\r\n\t\t\t\t...state,\r\n\t\t\t\t...action.data,\r\n\t\t\t\tisAuth:action.isAuth,\r\n\t\t\t}\r\n\t\tbreak;\r\n\t\t\r\n\t\tcase SET_CAPTCHA_URL:\r\n\t\t\treturn{\r\n\t\t\t\t...state,\r\n\t\t\t\tcaptchaURL:action.captchaURL,\r\n\t\t\t}\r\n\t\tbreak;\r\n\t\t\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}\r\n\r\nexport let setUserDataActionCreator = (data, isAuth) =>{\r\n\treturn{\r\n\t\ttype:SET_USER_DATA,\r\n\t\tdata:data,\r\n\t\tisAuth:isAuth,\r\n\t}\r\n}\r\n\r\nlet setCaptchaURLActionCreator = (captchaURL) =>{\r\n\treturn {\r\n\t\ttype:SET_CAPTCHA_URL,\r\n\t\tcaptchaURL:captchaURL,\r\n\t}\r\n}\r\n\r\nexport let getAuthDataThunkCreator = () => (dispatch) =>{\r\n\treturn authAPI.getAuthData().then((data)=>{\r\n\t\tif(!data.resultCode){\r\n\t\t\tdispatch(setUserDataActionCreator(data.data, true))\r\n\t\t}else{\r\n\t\t\tdispatch(setUserDataActionCreator(null, false));\r\n\t\t}\r\n\t});\r\n}\r\n\r\nexport let loginThunkCreator = (loginData) => (dispatch) =>{\r\n\treturn (async(values)=>{\r\n\t\tlet data=await authAPI.login(values);\r\n\t\tif(!data.resultCode){\r\n\t\t\tdispatch(setCaptchaURLActionCreator(null));\r\n\t\t\tdispatch(getAuthDataThunkCreator());\r\n\t\t}else if(data.resultCode==10){\r\n\t\t\tdispatch(getCaptchaURLThunkCreator())\r\n\t\t\treturn {[FORM_ERROR]:data.messages[0]};\r\n\t\t}else{\r\n\t\t\t return {[FORM_ERROR]:data.messages[0]};\r\n\t\t}\r\n\t})(loginData);\r\n}\r\n\r\nexport let logoutThunkCreator = () => (dispatch) =>{\r\n\tauthAPI.logout().then(data=>{\r\n\t\t!data.resultCode ? dispatch(setUserDataActionCreator(null,false)) : console.log('warning')\r\n\t});\r\n}\r\n\r\nexport let getCaptchaURLThunkCreator = () => (dispatch) =>{\r\n\tauthAPI.getCaptchaURL().then(data=>{\r\n\t\tdispatch(setCaptchaURLActionCreator(data.url));\r\n\t});\r\n}\r\n\r\nexport default authReducer;\r\n\r\n","export let getId = (state) =>{\r\n\treturn state.auth.id;\r\n}\r\n\r\nexport let getLogin = (state) =>{\r\n\treturn state.auth.login;\r\n}\r\n\r\nexport let getEmail = (state) =>{\r\n\treturn state.auth.email;\r\n}\r\n\r\nexport let getIsAuth = (state) =>{\r\n\treturn state.auth.isAuth;\r\n}\r\n\r\nexport let getCaptchaURL = (state) =>{\r\n\treturn state.auth.captchaURL;\r\n}\r\n","import React from 'react';\r\nimport LoginPanel from './LoginPanel';\r\nimport {connect} from 'react-redux';\r\nimport * as axios from 'axios';\r\nimport {logoutThunkCreator} from './../../../Redux/authReducer';\r\nimport {getIsAuth,getLogin} from './../../../Redux/auth-selector';\r\n\r\n\r\n\r\nclass LoginPanelAPIContainer extends React.Component{\r\n\tcomponentDidMount = () =>{\r\n\t\t\r\n\t}\r\n\t\r\n\trender = () =>{\r\n\t\treturn (\r\n\t\t\t<LoginPanel logout={this.props.logout} isAuth={this.props.isAuth} login={this.props.login} />\r\n\t\t)\r\n\t}\r\n}\r\n\r\nlet mapStateToProps = (state) =>{\r\n\treturn {\r\n\t\tisAuth:getIsAuth(state),\r\n\t\tlogin:getLogin(state),\r\n\t}\r\n}\t\r\n\r\nlet mapDispatchToProps = (dispatch) =>{\r\n\treturn {\r\n\t\tlogout:()=>{\r\n\t\t\tdispatch(logoutThunkCreator());\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps,mapDispatchToProps)(LoginPanelAPIContainer);","import React from 'react';\r\nimport classes from './Header.module.css';\r\nimport LoginPanelContainer from './LoginPanel/LoginPanelContainer';\r\nimport {NavLink} from 'react-router-dom';\r\n\r\n\r\nlet Header = (props)=>{\r\n\treturn(\r\n\t\t<header className={classes.header}>\r\n\t\t\t<NavLink to=\"/profile\" >\r\n\t\t\t\t<img src=\"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT53K9N8zHCT83D67nH228rxKxkS6RMojtknA&usqp=CAU=\" alt=\"logo\"/>\r\n\t\t\t</NavLink>\r\n\t\t\t<LoginPanelContainer />\r\n\t\t</header>\r\n\t)\r\n}\r\n\r\nexport default Header;","import React from 'react';\r\nimport {NavLink} from 'react-router-dom';\r\nimport styles from './NavItem.module.css';\r\n\r\nlet NavItem= (props)=>{\r\n\treturn(\r\n\t\t<li className={styles.navItem}><NavLink to={props.linkTo} activeClassName={styles.active}>{props.linkName}</NavLink></li>\r\n\t)\r\n}\r\n\r\nexport default NavItem;","import React from 'react';\r\nimport styles from './Nav.module.css';\r\nimport NavItem from './NavItem/NavItem';\r\n\r\n\r\nlet Nav=(props)=>{\r\n\tlet navItems=props.sidebarData.navItems;\r\n\tlet navItemsElements = navItems.map(n=>{\r\n\t\treturn <NavItem key={n.id} linkTo={n.linkTo} linkName={n.linkName} />\r\n\t})\r\n\t\r\n\treturn(\r\n\t\t<nav className={styles.nav}>\r\n\t\t<ul className={styles.navList}>\r\n\t\t\t{navItemsElements}\r\n\t\t</ul>\r\n\t\t</nav>\r\n\t)\r\n}\r\n\r\nexport default Nav;\r\n\r\n\r\n","import React from 'react';\r\nimport classes from './AddNewPost.module.css';\r\n\r\nlet AddNewPost = (props)=>{\r\n\tlet updatePostText=(e)=>{\r\n\t\tprops.updatePostText(e.target.value);\r\n\t}\r\n\t\r\n\treturn(\r\n\t\t<div className={classes.addNewPostWrapper}>\r\n\t\t\t<textarea onChange={updatePostText} className={classes.addPostText} value={props.newPostText} ></textarea>\r\n\t\t\t<button onClick={props.addNewPost} className={classes.addPostButton}>Отправить сообщение</button>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default AddNewPost;","import React from 'react';\r\nimport classes from './Post.module.css';\r\n\r\nlet Post = (props)=>{\r\n\treturn(\r\n\t\t<div className={classes.postWrapper}>\r\n\t\t\t<div className={classes.row}>\r\n\t\t\t\t<div className={classes.userAvatar}>\r\n\t\t\t\t\t<img src=\"https://arbordayblog.org/wp-content/uploads/2018/06/oak-tree-sunset-iStock-477164218.jpg\" alt=\"userAvatar\" />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className={classes.postText}>\r\n\t\t\t\t\t{props.postText}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div className={classes.row}>\r\n\t\t\t\t<div className={classes.likeButton}>\r\n\t\t\t\t\t<span>Мне нравится</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className={classes.likesCount}>\r\n\t\t\t\t\t{props.likesCount}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Post;","import React from 'react';\r\nimport classes from './PublishedPosts.module.css';\r\nimport Post from './Post/Post';\r\n\r\n\r\nlet PublishedPosts = (props)=>{\r\n\t\r\n\t\r\n\tlet PostElements = props.posts.map(p=>{\r\n\t\treturn <Post key={p.id} postText={p.postText} likesCount={p.likesCount} />\r\n\t});\r\n\t\r\n\t\r\n\treturn(\r\n\t\t<div>\r\n\t\t\t{PostElements}\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default PublishedPosts;","import React from 'react';\r\nimport classes from './UserPosts.module.css';\r\nimport AddNewPost from './AddNewPost/AddNewPost';\r\nimport PublishedPosts from './PublishedPosts/PublishedPosts';\r\n\r\n\r\nlet UserPosts = (props)=>{\r\n\treturn(\r\n\t\t<div>\r\n\t\t\t<AddNewPost \r\n\t\t\t\tnewPostText={props.newPostText}\r\n\t\t\t\taddNewPost={props.addNewPost} \r\n\t\t\t\tupdatePostText={props.updatePostText}\r\n\t\t\t/>\r\n\t\t\t<PublishedPosts posts={props.posts} />\r\n \t\t</div>\r\n\t)\r\n}\r\n\r\nexport default React.memo(UserPosts);","export default __webpack_public_path__ + \"static/media/preloader.44cef10a.svg\";","import React from 'react';\r\nimport preloaderSRC from './../../../assets/preloader.svg';\r\n\r\nlet Preloader = () =>{\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<img src={preloaderSRC} alt='preloader' />\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Preloader;","import React, {useState, useEffect} from 'react';\r\n\r\nlet UserStatus = React.memo((props) =>{ \r\n\t\r\n\t\r\n\tlet [editMode, changeEditMode] = useState(false);\r\n\tlet [status, changeStatus] = useState(props.status);\r\n\t\r\n\tuseEffect(()=>{changeStatus(props.status)},[props.status]);\r\n\t/*componentDidUpdate=(prevProps,prevState)=>{\r\n\t\tif(prevProps.status!==this.props.status){\r\n\t\t\tthis.setState({\r\n\t\t\t\tstatus:this.props.status,\r\n\t\t\t});\r\n\t\t}\r\n\t}*/\r\n\t\r\n\tlet activateEditMode = () =>{\r\n\t\tif(props.isOwner){\r\n\t\t\tchangeEditMode(true);\r\n\t\t}\r\n\t}\r\n\t\r\n\tlet deactivateEditMode = () =>{\r\n\t\tchangeEditMode(false);\r\n\t\tprops.updateUserStatusThunkCreator(status);\r\n\t}\r\n\t\r\n\tlet onStatusChange=(e)=>{\r\n\t\tchangeStatus(e.target.value);\r\n\t}\r\n\t\r\n\t\treturn(\r\n\t\t\t<div>\r\n\t\t\t\t{!editMode ?\r\n\t\t\t\t\t<span onDoubleClick={activateEditMode}>{props.status}</span> : \r\n\t\t\t\t\t<input onChange={onStatusChange} onBlur={deactivateEditMode} type='text' value={status} autoFocus={true}></input>\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t)\r\n})\r\n\r\nexport default UserStatus;","import React, {useEffect, useState} from 'react';\r\nimport  {Form, Field} from 'react-final-form';\r\nimport {FORM_ERROR} from 'final-form';\r\n\r\n\r\nlet UserEditInfo = React.memo(({profileInfo, deactivateEditMode,updateProfileInfoThunkCreator}) =>{\r\n\tlet profileDefaultAvatar=null;\r\n\t\r\n\tlet contactsSource = Object.keys(profileInfo.contacts);\r\n\tlet showContacts = contactsSource.map(key=>{\r\n\t\treturn (\r\n\t\t\t<div key={key}>\r\n\t\t\t\t<span>{key}:</span>\r\n\t\t\t\t<Field name={'contacts.' + key} >\r\n\t\t\t\t\t{({input,meta})=>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<input {...input} placeholder={key + ' address'} type=\"text\"/>\t\r\n\t\t\t\t\t\t\t<span>{meta.touched && meta.error}</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t}\r\n\t\t\t\t</Field>\r\n\t\t\t</div>\r\n\t\t)\r\n\t});\r\n\t\r\n\tlet submitProfileInfoForm = (data) =>{\r\n\t\treturn updateProfileInfoThunkCreator(data, profileInfo.userId).then((data)=>{\r\n\t\t\tif(!data){\r\n\t\t\t\tdeactivateEditMode();\r\n\t\t\t}else{\r\n\t\t\t\treturn data;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t\r\n\t\r\n\treturn (\r\n\t\t<Form \r\n\t\t initialValues={{...profileInfo}}\r\n\t\tonSubmit={submitProfileInfoForm}\r\n\t\t>\r\n\t\t{(props)=>\r\n\t\t\t<form onSubmit={props.handleSubmit}>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<button type=\"submit\">Enter</button>\r\n\t\t\t\t</div>\r\n\t\t\t\t{props.submitError && <div className=\"error\">{props.submitError}</div>}\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<span>Имя: </span>\r\n\t\t\t\t\t<Field name=\"fullName\" >\r\n\t\t\t\t\t\t\t{({input,meta})=>\r\n\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t<input {...input} placeholder=\"Name\" type=\"text\"/>\t\r\n\t\t\t\t\t\t\t\t\t<span>{meta.touched && meta.error}</span>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t</Field>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<span>Обо мне: </span>\r\n\t\t\t\t\t<Field name=\"aboutMe\" >\r\n\t\t\t\t\t\t\t{({input,meta})=>\r\n\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t<input {...input} placeholder=\"About me\" type=\"text\"/>\t\r\n\t\t\t\t\t\t\t\t\t<span>{meta.touched && meta.error}</span>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t</Field>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<span>Мои контакты :</span>\r\n\t\t\t\t\t{showContacts}\r\n\t\t\t\t</div>\r\n\t\t\t</form>\r\n\t\t}\r\n\t\t</Form>\r\n\t)\r\n})\r\n\r\nexport default UserEditInfo;\r\n","import React, {useState, useEffect} from 'react';\r\nimport styles from './UserPersonalData.module.css';\r\nimport Preloader from './../../common/Preloader/Preloader';\r\nimport UserStatus from './UserStatus/UserStatus';\r\nimport UserEditInfo from './UserEditInfo/UserEditInfo';\r\n\r\n\r\nlet profileDefaultAvatar = \"https://arbordayblog.org/wp-content/uploads/2018/06/oak-tree-sunset-iStock-477164218.jpg\";\t\r\n\r\nlet UserPersonalData = React.memo((props) =>{\r\n\t\r\n\tlet [profileInfo, changeProfileInfo] = useState(props.profileInfo);\r\n\t\r\n\tuseEffect(()=>{changeProfileInfo(props.profileInfo)},[props.profileInfo]);\r\n\t\r\n\tlet [editProfileInfo, setEditProfileInfo] = useState(false);\r\n\t\r\n\tlet changeProfilePhoto = (e) =>{\r\n\t\tprops.updateProfilePhotoThunkCreator(e.target.files[0]);\r\n\t}\r\n\t\r\n\tlet activateEditMode = () =>{\r\n\t\tsetEditProfileInfo(true);\r\n\t}\r\n\tlet deactivateEditMode = () =>{\r\n\t\tsetEditProfileInfo(false);\r\n\t}\r\n\t\r\n\tif(!profileInfo){\r\n\t\treturn(\r\n\t\t\t<Preloader />\r\n\t\t)\r\n\t}else{\r\n\t\treturn(\r\n\t\t\t<div className={styles.userPersonalDataWrapper}>\r\n\t\t\t\t<div className={styles.userAvatarWrapper}>\r\n\t\t\t\t\t<div className={styles.userAvatar}>\r\n\t\t\t\t\t\t<img src={profileInfo.photos.large ? profileInfo.photos.large : profileDefaultAvatar} alt=\"avatar\" />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{props.isOwner && <input type=\"file\" onChange={changeProfilePhoto}/>}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className={styles.userInfo}>\r\n\t\t\t\t\t<UserStatus isOwner={props.isOwner} status={props.status} updateUserStatusThunkCreator={props.updateUserStatusThunkCreator}/>\r\n\t\t\t\t\t{editProfileInfo && props.isOwner ? \r\n\t\t\t\t\t\t<UserEditInfo profileInfo={profileInfo} deactivateEditMode={deactivateEditMode} updateProfileInfoThunkCreator={props.updateProfileInfoThunkCreator}/> :\r\n\t\t\t\t\t\t<UserInfo profileInfo={profileInfo} activateEditMode={activateEditMode} isOwner={props.isOwner}/> \r\n\t\t\t\t\t}\r\n\t\t\t\t</div>\r\n\t\t\t</div> \r\n\t\t)\r\n\t}\r\n})\r\n\r\nlet UserInfo = React.memo(({profileInfo, activateEditMode, isOwner}) =>{\r\n\tlet contactsSource = Object.keys(profileInfo.contacts);\r\n\tlet showContacts = contactsSource.map(key=>{\r\n\t\tif(profileInfo.contacts[key]){\r\n\t\t\treturn (\r\n\t\t\t\t<div key={key}>\r\n\t\t\t\t\t<span>{key}:</span>\r\n\t\t\t\t\t<span><a href=\"#\">{profileInfo.contacts[key]}</a></span>\r\n\t\t\t\t</div>\r\n\t\t\t)\r\n\t\t}else{\r\n\t\t\treturn null;\r\n\t\t}\r\n\t});\r\n\t\r\n\treturn (\r\n\t\t<div className={styles.userInfo}>\r\n\t\t\t{isOwner ?\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<button onClick={activateEditMode} >Edit Profile Info</button>\r\n\t\t\t\t</div> :\r\n\t\t\t\tnull\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t<div>\r\n\t\t\t\t<span>Имя: </span>\r\n\t\t\t\t<span>{profileInfo.fullName}</span>\r\n\t\t\t</div>\r\n\t\t\t<div>\r\n\t\t\t\t<span>Обо мне: </span>\r\n\t\t\t\t<span>{profileInfo.aboutMe}</span>\r\n\t\t\t</div>\r\n\t\t\t<div>\r\n\t\t\t\t<span>Мои контакты :</span>\r\n\t\t\t\t{showContacts}\r\n\t\t\t</div>\r\n\t\t\t<div>\r\n\t\t\t\t<span></span>\r\n\t\t\t\t<span>{profileInfo.fullname}</span>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n})\r\n\r\n\r\nexport default UserPersonalData;","import React from 'react';\r\nimport classes from './Profile.module.css';\r\nimport UserPosts from './UserPosts/UserPosts';\r\nimport UserPersonalData from './UserPersonalData/UserPersonalData';\r\n\r\n\r\nlet Profile=React.memo(({updateUserStatusThunkCreator,\r\n\t\t\t  profileInfo,\r\n\t\t\t  status,\r\n\t\t\t  isOwner,\r\n\t\t\t  updateProfilePhotoThunkCreator,\r\n\t\t\t  posts,\r\n\t\t\t  newPostText,\r\n\t\t\t  updatePostText,\r\n\t\t\t  addNewPost,\r\n\t\t\t  updateProfileInfoThunkCreator})=>{\r\n\treturn(\r\n\t\t<div className={classes.profileWrapper}>\r\n\t\t\t<div className={classes.userPersonalData}>\r\n\t\t\t\t<UserPersonalData updateUserStatusThunkCreator={updateUserStatusThunkCreator} \r\n\t\t\t\t\t\t\t\t  profileInfo={profileInfo} \r\n\t\t\t\t\t\t\t\t  status={status} \r\n\t\t\t\t\t\t\t\t  isOwner={isOwner}\r\n\t\t\t\t\t\t\t\t  updateProfilePhotoThunkCreator={updateProfilePhotoThunkCreator}\r\n\t\t\t\t\t\t\t\t  updateProfileInfoThunkCreator={updateProfileInfoThunkCreator}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t\t<div className={classes.userPosts}>\r\n\t\t\t\t<h2 className={classes.header}>Мои посты</h2>\r\n\t\t\t\t<UserPosts \r\n\t\t\t\t\tposts={posts} \r\n\t\t\t\t\tnewPostText={newPostText}\r\n\t\t\t\t\tupdatePostText={updatePostText}\r\n\t\t\t\t\taddNewPost={addNewPost}\r\n\t\t\t\t/>\r\n\t\t\t</div> \r\n\t\t</div>\r\n\t)\r\n})\r\n\r\nexport default Profile;","import {profileAPI} from './../api/api';\r\nimport {FORM_ERROR} from 'final-form';\r\n\r\nlet ADD_NEW_POST = './my-app/profilePage/ADD_NEW_POST',\r\n\tUPDATE_POST_TEXT = './my-app/profilePage/UPDATE_POST_TEXT',\r\n\tSET_PROFILE_INFO = './my-app/profilePage/SET_PROFILE_INFO',\r\n\tSET_USER_STATUS = './my-app/profilePage/SET_USER_STATUS',\r\n\tCHANGE_IS_OWNER = './my-app/profilePage/CHANGE_IS_OWNER',\r\n\tUPDATE_PROFILE_PHOTOS =\t'./my-app/profilePage/UPDATE_PROFILE_PHOTOS';\r\n\r\nlet initialState={\r\n\tnewPostText:'',\r\n\tpostsData:[\r\n\t\t{id:1, postText:\"Первый пост\", likesCount:\"4\"},\r\n\t\t{id:2, postText:\"Второй пост\", likesCount:\"1\"},\r\n\t\t{id:3, postText:\"Третий пост\", likesCount:\"0\"},\r\n\t\t{id:4, postText:\"Просто пост\", likesCount:\"4\"},\r\n\t],\r\n\tprofileInfo:null,\r\n\tstatus:null,\r\n\tisOwner:false,\r\n};\r\n\r\n\r\nlet profilePageReducer = (state=initialState, action) =>{\r\n\tswitch(action.type){\r\n\t\tcase ADD_NEW_POST:\r\n\t\t\tlet newPost={\r\n\t\t\t\tid:state.postsData.length+1,\r\n\t\t\t\tpostText:state.newPostText,\r\n\t\t\t\tlikesCount:0,\r\n\t\t\t};\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tpostsData:[...state.postsData, newPost],\r\n\t\t\t\tnewPostText:'',\r\n\t\t\t};\r\n\t\tbreak;\r\n\t\t\t\r\n\t\tcase UPDATE_POST_TEXT:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tnewPostText:action.text,\r\n\t\t\t};\r\n\t\tbreak;\r\n\t\t\r\n\t\tcase SET_PROFILE_INFO:\r\n\t\t\treturn{\r\n\t\t\t\t...state,\r\n\t\t\t\tprofileInfo:action.profileInfo,\r\n\t\t\t}\r\n\t\tbreak;\t\r\n\t\t\r\n\t\tcase SET_USER_STATUS:\r\n\t\t\treturn{\r\n\t\t\t\t...state,\r\n\t\t\t\tstatus:action.status,\r\n\t\t\t}\r\n\t\tbreak;\r\n\t\t\r\n\t\tcase CHANGE_IS_OWNER:\r\n\t\t\treturn{\r\n\t\t\t\t...state,\r\n\t\t\t\tisOwner:action.isOwner,\r\n\t\t\t}\r\n\t\tbreak;\r\n\t\t\r\n\t\tcase UPDATE_PROFILE_PHOTOS :\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tprofileInfo:{...state.profileInfo, photos:action.photos}\r\n\t\t\t}\r\n\t\tbreak;\r\n\t\t\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}\r\n\r\nexport let addNewPostActionCreator = () =>{\r\n\treturn {\r\n\t\ttype: ADD_NEW_POST,\r\n\t};\r\n}\r\n\r\nexport let updatePostTextActionCreator = (text) =>{\r\n\treturn {\r\n\t\ttype: UPDATE_POST_TEXT,\r\n\t\ttext:text,\r\n\t};\r\n}\r\n\r\nexport let setProfileInfoActionCreator = (profileInfo) =>{\r\n\treturn {\r\n\t\ttype: SET_PROFILE_INFO,\r\n\t\tprofileInfo:profileInfo,\r\n\t}\r\n}\r\n\r\nexport let getProfileInfoThunkCreator = (userId) => (dispatch) =>{\r\n\tprofileAPI.getProfileInfo(userId).then(data=>{\r\n\t\tif(!data.resulCode){\r\n\t\t\tdispatch(setProfileInfoActionCreator(data));\r\n\t\t}else{\r\n\t\t\treturn null;\r\n\t\t}\r\n\t});\r\n}\r\n\r\nexport let setUserStatusActionCreator = (status) =>{\r\n\treturn {\r\n\t\ttype: SET_USER_STATUS,\r\n\t\tstatus:status,\r\n\t}\r\n}\r\n\r\nexport let getUserStatusThunkCreator = (userId) => (dispatch)=>{\r\n\tprofileAPI.getUserStatus(userId).then(data=>{\r\n\t\tdispatch(setUserStatusActionCreator(data));\r\n\t});\r\n}\r\n\r\nexport let updateUserStatusThunkCreator = (status) => (dispatch) =>{\r\n\tprofileAPI.updateUserStatus(status).then(data=>{\r\n\t\tdispatch(setUserStatusActionCreator(status));\r\n\t});\r\n}\r\n\r\nexport let changeIsOwnerActionCreator = (isOwner) =>{\r\n\treturn {\r\n\t\ttype: CHANGE_IS_OWNER,\r\n\t\tisOwner:isOwner,\r\n\t}\r\n}\r\n\r\nexport let updateProfilePhotoThunkCreator = (photoData) => (dispatch) =>{\r\n\tprofileAPI.updateProfilePhoto(photoData).then(data=>{\r\n\t\tif(!data.resultCode){\r\n\t\t\tdispatch(updateProfilePhotoActionCreator(data.data.photos));\r\n\t\t}\r\n\t});\r\n}\r\n\r\nlet updateProfilePhotoActionCreator = (photos) =>{\r\n\treturn {\r\n\t\ttype: UPDATE_PROFILE_PHOTOS,\r\n\t\tphotos:photos,\r\n\t}\r\n}\r\n\r\nexport let updateProfileInfoThunkCreator = (profileInfoData, userId) => (dispatch) =>{\r\n\treturn profileAPI.updateProfileInfo(profileInfoData).then(data=>{\r\n\t\tif(!data.resultCode){\r\n\t\t\tdispatch(getProfileInfoThunkCreator(userId));\r\n\t\t}else{\r\n\t\t\treturn {[FORM_ERROR]:data.messages[0]};\r\n\t\t}\r\n\t});\r\n}\r\n\r\nexport default profilePageReducer;","export let getNewPostText = (state) =>{\r\n\treturn state.profilePage.newPostText;\r\n}\r\n\r\nexport let getPostsData = (state) =>{\r\n\treturn state.profilePage.postsData;\r\n}\r\n\r\nexport let getProfileInfo = (state) =>{\r\n\treturn state.profilePage.profileInfo;\r\n}\r\n\r\nexport let getStatus = (state) =>{\r\n\treturn state.profilePage.status;\r\n}\r\n\r\nexport let getIsOwner = (state) =>{\r\n\treturn state.profilePage.isOwner;\r\n}\r\n","import React from 'react';\r\nimport Profile from './Profile';\r\nimport {connect} from 'react-redux';\r\nimport {updateProfileInfoThunkCreator, updateProfilePhotoThunkCreator, changeIsOwnerActionCreator, updateUserStatusThunkCreator, getUserStatusThunkCreator,getProfileInfoThunkCreator, updatePostTextActionCreator,addNewPostActionCreator, setProfileInfoActionCreator} from './../../Redux/profilePageReducer';\r\nimport {withRouter} from 'react-router-dom';\r\nimport {withAuthRedirect} from './../../hoc/withAuthRedirect';\r\nimport {compose} from 'redux';\r\nimport {getPostsData,getProfileInfo,getNewPostText,getStatus,getIsOwner} from './../../Redux/profilePage-selector';\r\nimport {getId} from './../../Redux/auth-selector';\r\n\r\nlet mapStateToProps = (state) =>{\r\n\treturn {\r\n\t\tposts:getPostsData(state),\r\n\t\tprofileInfo:getProfileInfo(state),\r\n\t\tnewPostText:getNewPostText(state),\r\n\t\tmyProfileId:getId(state),\r\n\t\tstatus:getStatus(state),\r\n\t\tisOwner:getIsOwner(state),\r\n\t}\r\n}\r\n\r\nlet mapDispatchToProps = (dispatch) =>{\r\n\treturn{\r\n\t\tupdatePostText: (text) =>{\r\n\t\t\tdispatch(updatePostTextActionCreator(text));\r\n\t\t},\r\n\t\taddNewPost: () =>{\r\n\t\t\tdispatch(addNewPostActionCreator());\r\n\t\t},\r\n\t\tsetProfileInfo: (profileInfo)=>{\r\n\t\t\tdispatch(setProfileInfoActionCreator(profileInfo));\r\n\t\t},\r\n\t\tgetProfileInfoThunkCreator:(userId)=>{\r\n\t\t\tdispatch(getProfileInfoThunkCreator(userId));\r\n\t\t},\r\n\t\tgetUserStatusThunkCreator:(userId)=>{\r\n\t\t\tdispatch(getUserStatusThunkCreator(userId));\r\n\t\t},\r\n\t\tupdateUserStatusThunkCreator:(status)=>{\r\n\t\t\tdispatch(updateUserStatusThunkCreator(status));\r\n\t\t},\r\n\t\tchangeIsOwnerActionCreator:(isOwner)=>{\r\n\t\t\tdispatch(changeIsOwnerActionCreator(isOwner));\r\n\t\t},\r\n\t\tupdateProfilePhotoThunkCreator:(photoData)=>{\r\n\t\t\tdispatch(updateProfilePhotoThunkCreator(photoData));\r\n\t\t},\r\n\t\tupdateProfileInfoThunkCreator:(profileInfoData, userId)=>{\r\n\t\t\treturn dispatch(updateProfileInfoThunkCreator(profileInfoData,userId));\r\n\t\t}\r\n\t}\r\n}\r\n\r\nclass ProfileAPIContainer extends React.PureComponent {\r\n\t\r\n\tupdateUserId = () =>{\r\n\t\tlet userId = (this.props.match.params.userId)?this.props.match.params.userId:this.props.myProfileId;\r\n\t\tif(userId==this.props.myProfileId){\r\n\t\t\tthis.props.changeIsOwnerActionCreator(true);\r\n\t\t}else{\r\n\t\t\tthis.props.changeIsOwnerActionCreator(false);\r\n\t\t}\r\n\t\tthis.props.getProfileInfoThunkCreator(userId);\r\n\t\tthis.props.getUserStatusThunkCreator(userId);\r\n\t}\r\n\t\r\n\tcomponentDidMount = () =>{\r\n\t\tthis.updateUserId();\r\n\t}\r\n\t\r\n\tcomponentDidUpdate = (prevProps, prevState)=>{\r\n\t\tif(this.props.match.params.userId!=prevProps.match.params.userId){\r\n\t\t\tthis.updateUserId();\r\n\t\t}\r\n\t}\r\n\t\r\n\trender = () =>{\r\n\t\t\r\n\t\treturn(\r\n\t\t\t\t<Profile {...this.props} />\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default compose(\r\n\twithRouter,\r\n\tconnect(mapStateToProps,mapDispatchToProps),\r\n\twithAuthRedirect\r\n)(ProfileAPIContainer);\r\n\r\n","import {usersAPI} from './../api/api';\r\n\r\n\r\nlet FOLLOW = './my-app/usersPage/FOLLOW',\r\n\tUNFOLLOW = './my-app/usersPage/UNFOLLOW',\r\n\tSET_USERS = './my-app/usersPage/SET_USERS',\r\n\tSET_CURRENT_PAGE = './my-app/usersPage/SET_CURRENT_PAGE',\r\n\tSET_TOTAL_USERS_COUNT = './my-app/usersPage/SET_TOTAL_USERS_COUNT',\r\n\tTOGGLE_IS_FETCHING = './my-app/usersPage/TOGGLE_IS_FETCHING',\r\n\tTOGGLE_FOLLOWING_IN_PROGRESS = './my-app/usersPage/TOGGLE_FOLLOWING_IN_PROGRESS';\r\n\r\n\r\n\r\nlet defaultState={\r\n\tusers:[\r\n\t\t\r\n\t],\r\n\tusersOnPage:10,\r\n\ttotalUsersCount:0,\r\n\tcurrentPage:1,\r\n\tisFetching:false,\r\n\tfollowingInProgress:[],\r\n\tpagesInPortion:5,\r\n}\r\n\r\nlet usersPageReducer = (state=defaultState, action) =>{\r\n\tswitch(action.type){\r\n\t\tcase FOLLOW:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tusers:state.users.map((user)=>{\r\n\t\t\t\t\tif(user.id===action.userId){\r\n\t\t\t\t\t\tuser.followed=true;\r\n\t\t\t\t\t\treturn user;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn user;\r\n\t\t\t\t\t}\r\n\t\t\t\t}),\r\n\t\t\t}\r\n\t\tbreak;\r\n\t\tcase UNFOLLOW:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tusers:state.users.map((user)=>{\r\n\t\t\t\t\tif(user.id===action.userId){\r\n\t\t\t\t\t\tuser.followed=false;\r\n\t\t\t\t\t\treturn user;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn user;\r\n\t\t\t\t\t}\r\n\t\t\t\t}),\r\n\t\t\t}\r\n\t\tbreak;\r\n\t\tcase SET_USERS:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tusers:[...action.users],\r\n\t\t\t}\r\n\t\tbreak;\r\n\t\tcase SET_CURRENT_PAGE:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tcurrentPage:action.currentPage,\r\n\t\t\t}\r\n\t\tbreak;\r\n\t\tcase SET_TOTAL_USERS_COUNT:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\ttotalUsersCount:action.totalUsersCount,\r\n\t\t\t}\r\n\t\tbreak;\r\n\t\tcase TOGGLE_IS_FETCHING:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tisFetching:!state.isFetching,\r\n\t\t\t}\r\n\t\tbreak;\r\n\t\tcase TOGGLE_FOLLOWING_IN_PROGRESS:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tfollowingInProgress:action.isFollowingInProgress ?\r\n\t\t\t\t\t\t\t\t    [...state.followingInProgress, action.userId] :\r\n\t\t\t\t\t\t\t\t\tstate.followingInProgress.filter(userId=>userId!=action.userId),\r\n\t\t\t}\r\n\t\tbreak;\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}\r\n\r\nexport let followActionCreator = (userId) =>{\r\n\treturn {\r\n\t\ttype:FOLLOW,\r\n\t\tuserId:userId,\r\n\t}\r\n}\r\n\r\nexport let unfollowActionCreator = (userId) =>{\r\n\treturn {\r\n\t\ttype:UNFOLLOW,\r\n\t\tuserId:userId,\r\n\t}\r\n}\r\n\r\nexport let setUsersActionCreator = (users) =>{\r\n\treturn {\r\n\t\ttype:SET_USERS,\r\n\t\tusers:users,\r\n\t}\r\n}\r\n\r\nexport let setTotalUsersCountActionCreator = (usersCount) =>{\r\n\treturn {\r\n\t\ttype:SET_TOTAL_USERS_COUNT,\r\n\t\ttotalUsersCount:usersCount,\r\n\t}\r\n}\r\n\r\nexport let setCurrentPageActionCreator = (currentPage) =>{\r\n\treturn {\r\n\t\ttype:SET_CURRENT_PAGE,\r\n\t\tcurrentPage:currentPage,\r\n\t}\r\n}\r\n\r\nexport let toggleIsFetchingActionCreator = () =>{\r\n\treturn {\r\n\t\ttype:TOGGLE_IS_FETCHING,\r\n\t}\r\n}\r\n\r\nexport let toggleFollowingInProgressActionCreator = (isFollowingInProgress,userId)=>{\r\n\treturn {\r\n\t\ttype:TOGGLE_FOLLOWING_IN_PROGRESS,\r\n\t\tisFollowingInProgress:isFollowingInProgress,\r\n\t\tuserId:userId,\r\n\t}\r\n}\r\n\r\nexport let followUserThunkCreator = (userId) => (dispatch) => {\r\n\tdispatch(toggleFollowingInProgressActionCreator(true,userId));\r\n\tusersAPI.followUser(userId).then(data=>{\r\n\t\tif(data.resultCode==0){\r\n\t\t\tdispatch(followActionCreator(userId));\r\n\t\t\tdispatch(toggleFollowingInProgressActionCreator(false,userId));\r\n\t\t}\r\n\t});\r\n}\r\n\r\nexport let unfollowUserThunkCreator = (userId) => (dispatch) => {\r\n\tdispatch(toggleFollowingInProgressActionCreator(true,userId));\r\n\tusersAPI.unfollowUser(userId).then(data=>{\r\n\t\tif(data.resultCode==0){\r\n\t\t\tdispatch(unfollowActionCreator(userId));\r\n\t\t\tdispatch(toggleFollowingInProgressActionCreator(false,userId));\r\n\t\t}\r\n\t});\r\n}\r\n\r\nexport let setUsersThunkCreator = (currentPage,usersOnPage) => (dispatch) => {\r\n\tdispatch(toggleIsFetchingActionCreator());\r\n\tusersAPI.setUsers(currentPage,usersOnPage).then(data=>{\r\n\t\tdispatch(toggleIsFetchingActionCreator());\r\n\t\tdispatch(setUsersActionCreator(data.items));\r\n\t\tdispatch(setTotalUsersCountActionCreator(data.totalCount));\r\n\t});\r\n}\r\n\r\nexport default usersPageReducer;","import React from 'react';\r\nimport styles from './User.module.css';\r\nimport {NavLink} from 'react-router-dom';\r\nimport * as axios from 'axios';\r\nimport {usersAPI} from './../../../api/api';\r\n\r\nlet User = (props) =>{\r\n\tlet defaultAvatar='https://upload.wikimedia.org/wikipedia/en/thumb/7/72/Avatar_icon_green.svg/1024px-Avatar_icon_green.svg.png';\r\n\t\r\n\tlet followUser=()=>{\r\n\t\tprops.followUserThunkCreator(props.id);\r\n\t}\r\n\t\r\n\tlet unfollowUser=()=>{\r\n\t\tprops.unfollowUserThunkCreator(props.id);\r\n\t}\r\n\t\r\n\treturn(\r\n\t\t<div className={styles.userWrapper}>\r\n\t\t\t<div className={styles.followButton}>\r\n\t\t\t\t{props.followed ? \r\n\t\t\t\t\t<button disabled={props.followingInProgress.some((userId)=>userId==props.id)} onClick={unfollowUser}>UNFOLLOW</button> :\r\n\t\t\t\t\t<button disabled={props.followingInProgress.some((userId)=>userId==props.id)} onClick={unfollowUser} onClick={followUser}>FOLLOW</button>\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t\t<NavLink to={\"profile/\"+ props.id}>\r\n\t\t\t\t<div className={styles.userPhoto}>\r\n\t\t\t\t\t<img src={props.userPhoto!==null?props.userPhoto:defaultAvatar} alt={props.name} />\r\n\t\t\t\t</div>\r\n\t\t\t</NavLink>\r\n\t\t\t<div className={styles.userInfo}>\r\n\t\t\t\t<span className={styles.userName}>{props.name}</span>\r\n\t\t\t\t\t{props.status!==null?<div className={styles.userStatus}>{props.status}</div>:null}\r\n\t\t\t</div>\t\t\t\r\n\t\t</div>\r\n\t)\r\n}\r\nexport default User;","import React, {useState, useEffect} from 'react';\r\nimport styles from './Pagination.module.css';\r\nimport * as axios from 'axios';\r\n\r\n\r\nlet PrevButtons = React.memo(({currentPortion,changeCurrentPortion,lastPortion}) =>{\r\n\tlet toFirstPortion = () =>{\r\n\t\tchangeCurrentPortion(1);\r\n\t}\r\n\tlet toPrevPortion = () =>{\r\n\t\tchangeCurrentPortion(currentPortion-1);\r\n\t}\r\n\t\r\n\tif(lastPortion==1){\r\n\t\treturn null;\r\n\t}\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<button onClick={toFirstPortion} disabled={currentPortion==1} >&lt;&lt;</button>\r\n\t\t\t<button onClick={toPrevPortion} disabled={currentPortion==1} >&lt;</button>\r\n\t\t</div>\r\n\t);\r\n})\r\n\r\nlet NextButtons =  React.memo(({currentPortion,changeCurrentPortion,lastPortion}) =>{\r\n\tlet toLastPortion = () =>{\r\n\t\tchangeCurrentPortion(lastPortion);\r\n\t}\r\n\tlet toNextPortion = () =>{\r\n\t\tchangeCurrentPortion(currentPortion+1);\r\n\t}\r\n\tif(lastPortion==1){\r\n\t\treturn null;\r\n\t}\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<button onClick={toNextPortion} disabled={currentPortion==lastPortion} >&gt;</button>\r\n\t\t\t<button onClick={toLastPortion} disabled={currentPortion==lastPortion} >&gt;&gt;</button>\r\n\t\t</div>\r\n\t);\r\n})\r\n\r\nlet Pagination =  React.memo(({totalPages, setCurrentPage, pagesInPortion}) =>{\r\n\tlet [currentPortion,changeCurrentPortion]=useState(1);\r\n\tlet totalPortionsCount=Math.ceil(totalPages/pagesInPortion);\r\n\tlet firstPageInCurrentPortion = ((currentPortion-1)*pagesInPortion)+1;\r\n\tlet lastPageInCurrentPortion = firstPageInCurrentPortion+(pagesInPortion-1);\r\n\tif(lastPageInCurrentPortion>totalPages){\r\n\t\tlastPageInCurrentPortion=totalPages;\r\n\t}\r\n\tlet pagesElements;\r\n\tlet pages=[];\r\n\tfor(let i=firstPageInCurrentPortion;i<=lastPageInCurrentPortion;i++){\r\n\t\tpages.push(i);\r\n\t};\r\n\tpagesElements = pages.map(page=>(<span key={page} onClick={()=>setCurrentPage(page)}>| {page} |</span>));\r\n\t\r\n\treturn(\r\n\t\t<div>\r\n\t\t\t<PrevButtons currentPortion={currentPortion} changeCurrentPortion={changeCurrentPortion} lastPortion={totalPortionsCount}/>\r\n\t\t\t{pagesElements}\r\n\t\t\t<NextButtons currentPortion={currentPortion} changeCurrentPortion={changeCurrentPortion} lastPortion={totalPortionsCount}/>\r\n\t\t</div>\r\n\t)\r\n})\r\n\r\nexport default Pagination;\r\n\r\n","import React from 'react';\r\nimport Pagination from './Pagination';\r\nimport * as axios from 'axios';\r\n\r\nclass PaginationAPIContainer extends React.Component{\r\n\tsetCurrentPage=(currentPage)=>{\r\n\t\tthis.props.setCurrentPage(currentPage);\r\n\t\tthis.props.setUsersThunkCreator(currentPage, this.props.usersOnPage);\r\n\t}\r\n\t\r\n\t\r\n\trender = () =>{\r\n\t\tlet totalPages = Math.ceil(this.props.totalUsersCount/this.props.usersOnPage);\r\n\t\treturn (\r\n\t\t\t<Pagination isFetching={this.props.isFetching} \r\n\t\t\t\t\t\ttotalPages = {totalPages} \r\n\t\t\t\t\t\tsetCurrentPage={this.setCurrentPage} \r\n\t\t\t\t\t\tcurrentPage={this.props.currentPage} \r\n\t\t\t\t\t\tpagesInPortion={this.props.pagesInPortion}\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default PaginationAPIContainer;","import React from 'react';\r\nimport * as axios from 'axios';\r\nimport  User from './User/User';\r\nimport PaginationAPIContainer from './Pagination/PaginationAPIContainer';\r\nimport Preloader from './../common/Preloader/Preloader';\r\n\r\nclass Users extends React.PureComponent{\r\n\t\r\n\tcomponentDidMount=()=>{\r\n\t\tthis.props.setUsersThunkCreator(this.props.currentPage,this.props.usersOnPage);\t\r\n\t}\r\n\t\r\n\t\r\n\trender=()=>{\r\n\t\tlet usersElements = this.props.users.map((user)=>{\r\n\t\t\treturn (\r\n\t\t\t\t<User \r\n\t\t\t\t\tkey={user.id} \r\n\t\t\t\t\tid={user.id} \r\n\t\t\t\t\tname={user.name} \r\n\t\t\t\t\tstatus={user.status}\r\n\t\t\t\t\tfollowed={user.followed}\t\t\t\t\t\r\n\t\t\t\t\tuserPhoto={user.photos.small} \r\n\t\t\t\t\tfollowUserThunkCreator={this.props.followUserThunkCreator}\r\n\t\t\t\t\tunfollowUserThunkCreator={this.props.unfollowUserThunkCreator}\r\n\t\t\t\t\tfollowingInProgress={this.props.followingInProgress}\r\n\t\t\t\t\ttoggleFollowingInProgress={this.props.toggleFollowingInProgress}\r\n\t\t\t\t/>\r\n\t\t\t)\r\n\t\t});\r\n\t\t\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<div >\r\n\t\t\t\t\t<PaginationAPIContainer pagesInPortion={this.props.pagesInPortion} totalUsersCount={this.props.totalUsersCount} setUsersThunkCreator={this.props.setUsersThunkCreator} isFetching ={this.props.isFetching} setCurrentPage={this.props.setCurrentPage}  usersOnPage={this.props.usersOnPage} currentPage={this.props.currentPage}/>\r\n\t\t\t\t</div>\r\n\t\t\t\t{this.props.isFetching ? <Preloader /> : usersElements}\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default Users;","import {createSelector} from 'reselect';\r\n\r\nexport let getUsersFromState = (state) =>{\r\n\treturn state.usersPage.users;\r\n}\r\n\r\nexport let getUsers = createSelector(\r\n\t[getUsersFromState],\r\n\t(users)=>{\r\n\t\treturn users;\r\n\t}\r\n);\r\n\r\nexport let getUsersOnPage = (state) =>{\r\n\treturn state.usersPage.usersOnPage;\r\n}\r\n\r\nexport let getPagesInPortion = (state) =>{\r\n\treturn state.usersPage.pagesInPortion;\r\n}\r\n\r\nexport let getTotalUsersCount = (state) =>{\r\n\treturn state.usersPage.totalUsersCount;\r\n}\r\n\r\nexport let getCurrentPage = (state) =>{\r\n\treturn state.usersPage.currentPage;\r\n}\r\n\r\nexport let getIsFetching = (state) =>{\r\n\treturn state.usersPage.isFetching;\r\n}\r\n\r\nexport let getFollowingInProgress = (state) =>{\r\n\treturn state.usersPage.followingInProgress;\r\n}\r\n","import React from 'react';\r\nimport {connect} from 'react-redux';\r\nimport {setUsersThunkCreator, followUserThunkCreator, unfollowUserThunkCreator, toggleFollowingInProgressActionCreator, toggleIsFetchingActionCreator, setTotalUsersCountActionCreator, setCurrentPageActionCreator} from './../../Redux/usersPageReducer'; \r\nimport Users from './Users';\r\nimport * as axios from 'axios';\r\nimport  {getPagesInPortion,getUsers,getTotalUsersCount,getCurrentPage,getUsersOnPage,getIsFetching,getFollowingInProgress} from './../../Redux/usersPage-selector';\r\n\r\n\r\n\r\nlet mapStateToProps = (state) =>{\r\n\treturn {\r\n\t\tusers:getUsers(state),\r\n\t\ttotalUsersCount:getTotalUsersCount(state),\r\n\t\tcurrentPage:getCurrentPage(state),\r\n\t\tusersOnPage:getUsersOnPage(state),\r\n\t\tisFetching:getIsFetching(state),\r\n\t\tfollowingInProgress:getFollowingInProgress(state),\r\n\t\tpagesInPortion:getPagesInPortion(state),\r\n\t}\r\n}\r\n\r\nlet mapDispatchToProps = (dispatch) =>{\r\n\treturn{\r\n\t\tsetTotalUsersCount : (usersCount) =>{\r\n\t\t\tdispatch(setTotalUsersCountActionCreator(usersCount));\r\n\t\t},\r\n\t\tsetCurrentPage : (currentPage) => {\r\n\t\t\tdispatch(setCurrentPageActionCreator(currentPage));\r\n\t\t},\r\n\t\ttoggleIsFetching : () => {\r\n\t\t\tdispatch(toggleIsFetchingActionCreator());\r\n\t\t},\r\n\t\ttoggleFollowingInProgress: (isFollowingInProgress,userId)=>{\r\n\t\t\tdispatch(toggleFollowingInProgressActionCreator(isFollowingInProgress,userId));\r\n\t\t},\r\n\t\tfollowUserThunkCreator : (userId) =>{\r\n\t\t\tdispatch(followUserThunkCreator(userId));\r\n\t\t},\r\n\t\tunfollowUserThunkCreator : (userId) => {\r\n\t\t\tdispatch(unfollowUserThunkCreator(userId));\r\n\t\t},\r\n\t\tsetUsersThunkCreator : (currentPage,usersOnPage) => {\r\n\t\t\tdispatch(setUsersThunkCreator(currentPage,usersOnPage));\r\n\t\t}\r\n\t}\r\n}\r\nlet UsersContainer = connect(mapStateToProps,mapDispatchToProps)(Users);\r\n\r\nexport default UsersContainer; ","import React from 'react';\r\nimport {Form, Field} from 'react-final-form';\r\nimport {required,maxSymbolsLength} from './../../validator/validate';\r\nimport {connect} from 'react-redux';\r\nimport {loginThunkCreator} from './../../Redux/authReducer';\r\nimport {Redirect} from 'react-router-dom';\r\nimport {getIsAuth, getCaptchaURL} from './../../Redux/auth-selector';\r\n\r\n\r\n\r\nlet composeValidators = (...validators) => (value)=>{\r\n\treturn validators.reduce((error,validator)=>error || validator(value), undefined);\r\n}\r\n\r\n\r\nlet maxSymbolsLength30=maxSymbolsLength(30);\r\nlet LoginForm = (props)=>{\r\n\tlet onFormSubmit=async (values)=>{\r\n\t\treturn props.login(values);\r\n\t};\r\n\t\r\n\treturn(\r\n\t\t<Form \r\n\t\t initialValues={{\r\n\t\t}}\r\n\t\tonSubmit={onFormSubmit}\r\n\t\tcaptchaURL={props.captchaURL}\r\n\t\t>\r\n\t\t{(props)=>\r\n\t\t\t<form onSubmit={props.handleSubmit}>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<Field name=\"login\" validate={composeValidators(required, maxSymbolsLength30)}>\r\n\t\t\t\t\t\t{({input,meta})=>\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<input {...input} placeholder=\"Login\" type=\"text\"/>\t\r\n\t\t\t\t\t\t\t\t<span>{meta.touched && meta.error}</span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</Field>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<Field name=\"password\" validate={composeValidators(required)}>\r\n\t\t\t\t\t\t{({input,meta})=>\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<input {...input} placeholder=\"Password\" type=\"text\"/>\t\r\n\t\t\t\t\t\t\t\t<span>{meta.touched && meta.error}</span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</Field>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<Field name=\"rememberMe\" >\r\n\t\t\t\t\t\t{({input,meta})=>\r\n\t\t\t\t\t\t\t<input {...input} type=\"checkbox\" placeholder=\"rememberMe\"/>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</Field>\r\n\t\t\t\t</div>\r\n\t\t\t\t\r\n\t\t\t\t{props.captchaURL ? (<div>\r\n\t\t\t\t\t<img src={props.captchaURL} alt='captcha' />\r\n\t\t\t\t\t<Field name=\"captcha\">\r\n\t\t\t\t\t\t{({input,meta})=>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t<input {...input} type=\"text\" placeholder=\"Captcha\"/>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</Field>\r\n\t\t\t\t</div>) : null }\r\n\t\t\t\t {props.submitError && <div className=\"error\">{props.submitError}</div>}\r\n\t\t\t\t<div><button type=\"submit\">Login</button></div>\r\n\t\t\t</form>\r\n\t\t}\r\n\t\t</Form>\r\n\t)\r\n}\r\n\r\nlet mapStateToProps=(state)=>{\r\n\treturn {\r\n\t\tisAuth:getIsAuth(state),\r\n\t\tcaptchaURL:getCaptchaURL(state),\r\n\t}\r\n}\r\n\r\nlet mapDispatchToProps=(dispatch)=>{\r\n\treturn {\r\n\t\tlogin:(loginData)=>{\r\n\t\t\treturn dispatch(loginThunkCreator(loginData));\r\n\t\t},\r\n\t}\r\n}\r\n\r\n\r\nlet Login = (props) =>{\r\n\tif(props.isAuth) {\r\n\t\treturn <Redirect to=\"/profile\" />\r\n\t}\r\n\treturn(\r\n\t\t<div>\r\n\t\t\t<h1>LOGIN</h1>\r\n\t\t\t<LoginForm login={props.login} captchaURL={props.captchaURL} />\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default connect(mapStateToProps,mapDispatchToProps)(Login);\r\n","import {getAuthDataThunkCreator} from './authReducer';\r\n\r\nlet SET_INITIALIZED_SUCCESS = './my-app/app/SET_INITIALIZED_SUCCESS';\r\n\r\nlet defaultState={\r\n\tisAppInitialized:false,\r\n}\r\n\r\nlet appReducer=(state=defaultState,action)=>{\r\n\tswitch (action.type){\r\n\t\tcase SET_INITIALIZED_SUCCESS :\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tisAppInitialized:true,\r\n\t\t\t}\r\n\t\tbreak;\r\n\t\tdefault :\r\n\t\t\treturn state;\r\n\t}\r\n}\r\n\r\nexport default appReducer;\r\n\r\nlet setInitializedSuccessActionCreator = () =>{\r\n\treturn{\r\n\t\ttype:SET_INITIALIZED_SUCCESS,\r\n\t}\r\n}\r\n\r\nexport let appInitialization = () => (dispatch) =>{\r\n\tdispatch(getAuthDataThunkCreator()).then(()=>{\r\n\t\tdispatch(setInitializedSuccessActionCreator());\r\n\t});\r\n}","export let getIsAppInitialized = (state) =>{\r\n\treturn state.app.isAppInitialized;\r\n}","let initialState={\r\n\tnavItems:[\r\n\t\t{id:1, linkTo:\"/profile\", linkName:\"Profile\"},\r\n\t\t{id:2, linkTo:\"/dialogs\", linkName:\"Messages\"},\r\n\t\t{id:3, linkTo:\"/news\", linkName:\"News\"},\r\n\t\t{id:4, linkTo:\"/music\", linkName:\"Music\"},\r\n\t\t{id:5, linkTo:\"/users\", linkName:\"Users\"},\r\n\t],\r\n}\r\n\r\nlet sidebarReducer=(state=initialState,action)=>{\r\n\tswitch(action.type){\r\n\t\tcase 'fdgfd':\r\n\t\t\r\n\t\tbreak;\r\n\t\t\r\n\t\tdefault: \r\n\t\t\treturn state;\r\n\t}\r\n}\r\n\r\nexport default sidebarReducer;","import {createStore, combineReducers, applyMiddleware} from 'redux';\r\nimport profilePageReducer from './profilePageReducer';\r\nimport dialogsPageReducer from './dialogsPageReducer';\r\nimport sidebarReducer from './sidebarReducer';\r\nimport usersPageReducer from './usersPageReducer';\r\nimport authReducer from './authReducer';\r\nimport thunkMiddleware from 'redux-thunk';\r\nimport appReducer from './appReducer';\r\n\r\nlet reducers = combineReducers({\r\n\tprofilePage:profilePageReducer,\r\n\tdialogsPage:dialogsPageReducer,\r\n\tsidebar:sidebarReducer,\r\n\tusersPage:usersPageReducer,\r\n\tauth:authReducer,\r\n\tapp:appReducer,\r\n});\r\n\r\nlet store=createStore(reducers,applyMiddleware(thunkMiddleware));\r\nwindow.store=store;\r\n\r\nexport default store;","import React from 'react';\r\nimport {connect} from 'react-redux';\r\nimport {compose} from 'redux';\r\nimport {Provider} from 'react-redux';\r\nimport {BrowserRouter} from 'react-router-dom';\r\nimport styles from './App.module.css';\r\n\r\nimport Header from './components/Header/Header';\r\nimport Nav from './components/Nav/Nav';\r\nimport ProfileContainer from './components/Profile/ProfileContainer';\r\nimport UsersContainer from './components/Users/UsersContainer';\r\nimport Login from './components/Login/Login';\r\nimport {Switch, Route, Redirect} from 'react-router-dom';\r\nimport {appInitialization} from './Redux/appReducer';\r\nimport {getAuthDataThunkCreator} from './Redux/authReducer';\r\nimport Preloader from './components/common/Preloader/Preloader';\r\nimport {getIsAppInitialized} from './Redux/app-selector';\r\nimport store from './Redux/redux-store';\r\n\r\nlet DialogsContainer = React.lazy(() => import('./components/Dialogs/DialogsContainer'));\r\n\r\nclass App extends React.Component{\r\n\t\r\n\tcomponentDidMount = () =>{\r\n\t\tthis.props.appInitialization();\r\n\t}\r\n\t\r\n\trender=()=>{\r\n\t\tif(!this.props.isAppInitialized){\r\n\t\t\treturn <Preloader />\r\n\t\t}\r\n\t\treturn(\r\n\t\t\t\t<div className={styles.appWrapper}>\r\n\t\t\t\t\t<Header />\r\n\t\t\t\t\t<Nav sidebarData={this.props.store.getState().sidebar} />\r\n\t\t\t\t\t<div className={styles.appContent}>\r\n\t\t\t\t\t\t<Switch>\r\n\t\t\t\t\t\t\t<Route exact path=\"/\" render={()=>{return(\r\n\t\t\t\t\t\t\t\t<Redirect to=\"/profile\"/>)}}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<Route path=\"/profile/:userId?\" render={()=>{return(\r\n\t\t\t\t\t\t\t\t<ProfileContainer />)}}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<Route path='/dialogs' render={()=>{return(\r\n\t\t\t\t\t\t\t\t<React.Suspense fallback={<Preloader />}>\r\n\t\t\t\t\t\t\t\t\t<DialogsContainer />\r\n\t\t\t\t\t\t\t\t</React.Suspense>\r\n\t\t\t\t\t\t\t)}} />\r\n\t\t\t\t\t\t\t<Route path='/users' render={()=>{return(\r\n\t\t\t\t\t\t\t\t<UsersContainer />)}}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<Route path='/login' render={()=>{return(\r\n\t\t\t\t\t\t\t\t<Login />)}}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<Route path='*' render={()=>{return(\r\n\t\t\t\t\t\t\t\t<div>page 404</div>)}}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Switch>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t)\r\n\t}\r\n};\r\n\r\nlet mapStateToProps = (state) =>{\r\n\treturn {\r\n\t\tisAppInitialized:getIsAppInitialized(state),\r\n\t}\r\n}\r\n\r\nlet mapDispatchToProps = (dispatch) =>{\r\n\treturn{\r\n\t\tappInitialization:()=>{\r\n\t\t\tdispatch(appInitialization());\r\n\t\t},\r\n\t\tgetAuthDataThunkCreator:()=>{\r\n\t\t\tdispatch(getAuthDataThunkCreator());\r\n\t\t},\r\n\t}\r\n}\r\n\r\nlet AppContainer = compose(\r\n\tconnect(mapStateToProps,mapDispatchToProps)\r\n)(App);\r\n\r\n\r\nexport default ()=>{\r\n\treturn (\r\n\t\t<Provider store={store}>\r\n\t\t\t<BrowserRouter>\r\n\t\t\t\t<AppContainer store={store}/>\r\n\t\t\t</BrowserRouter>\r\n\t\t</Provider>\r\n\t)\r\n}","import './normalize.css';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport store from './Redux/redux-store';\n\nReactDOM.render(\n\t<App />\n\t,\n\tdocument.getElementById('root')\n);\n\n\n\n\n\n"],"sourceRoot":""}